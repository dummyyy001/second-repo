import{r as p,j as e,_ as oe,l as g,N as Ks,O as Ws,C as F,Q as $s,S as Gs,T as Us,U as Hs,V as qs,W as Xs,X as Js,Y as Ys,Z as Qs,$ as Zs,a0 as en,a1 as tn,a2 as sn,a3 as nn,a4 as Je,a5 as rn,a6 as on,w as We,a7 as an,a8 as ln,a9 as cn,aa as dn,ab as un,ac as pn,ad as xn,ae as gn,af as mn,ag as hn,ah as Gt,ai as kt,aj as Ye,ak as Qe,al as fn,am as bn,an as Ut,ao as Ve,ap as Ht,aq as rt,ar as jn,as as yn,at as In,au as Tn,av as Sn,aw as Cn,J as Ee,ax as qt,ay as yt,e as L,az as vn,aA as Pt,aB as Xt,aC as wn,aD as En,aE as kn,aF as Ie,aG as st,aH as Pn,R as Ae,aI as _n,aJ as Rn,aK as Ze,aL as ot,aM as Mn,aN as At,P as An,k as Lt,m as Ln}from"./main-1.0.6.js";import{l as On,a as Dn,b as Nn,c as Fn,d as Vn,e as zn,f as Bn,g as Kn,h as Wn,s as $n}from"./ActionsExplorer-1.0.6-044b946f.js";import{t as Gn,w as Un,x as Hn,y as Oe,z as et,B as y,C as qn,u as H,b as A,M as te,E as $e,F as Xn,G as Jn,f as Yn,T as je,g as Qn,H as Zn,o as er,I as tr,R as Ge,A as ct,d as dt,J as sr,K as nr,L as Jt,N as Yt,e as Qt,O as rr,P as or,S as _t,Q as ar,v as ir,a as Zt,U as lr,n as cr}from"./main-1.0.6-7aa8b30c.js";import{g as es,a as ts,_ as D,u as ze,b as pe,c as dr,d as ne,s as ut,e as ss,f as ns,h as rs,r as be,T as Se,I as le,P as It}from"./iconBase-1.0.6-b8af29f5.js";import{u as ke,M as Pe,B as Ot,T as os,a as as,b as at,c as Q,d as is}from"./index.esm-1.0.6-8607d2e4.js";import{b as ls,B as cs,c as ds,d as ur}from"./index.esm-1.0.6-f58f385b.js";import{T as pr,a as xr}from"./index.esm-1.0.6-e9e7a4c1.js";import{f as gr,D as mr,g as hr,h as fr,C as me,a as nt,T as jt,i as br,S as Be,R as jr,B as yr,b as Ir,c as Tr,d as Sr,e as Dt}from"./settings-1.0.6-c1644694.js";import{c as us}from"./Close-1.0.6-4b5eac8d.js";import{P as Nt,D as Cr,a as vr,b as wr}from"./DialogContent-1.0.6-e7b9fcb3.js";import{A as ce,C as Tt,a as St,B as $,b as Er}from"./AdminTheme-1.0.6-6896de59.js";import{C as xe}from"./Checkbox-1.0.6-26443287.js";import{L as ye}from"./Link-1.0.6-610563e0.js";import{C as kr,a as Pr}from"./index-1.0.6-8954a6ee.js";import{F as q,b as Z,T as re,S as Te,I as it,a as he,A as Ft}from"./TextField-1.0.6-b41aa978.js";import{C as _r}from"./CardActions-1.0.6-6d819e5d.js";import{I as Vt}from"./InputAdornment-1.0.6-f8c6f282.js";import{M as K}from"./MenuItem-1.0.6-b9a91535.js";import{A as Rr}from"./AdminMetaData-1.0.6-b5155062.js";import{S as Mr}from"./ScopeEnum-1.0.6-035f2615.js";import{A as Ce,a as ve,b as we}from"./AccordionSummary-1.0.6-e78821a8.js";import{R as ps}from"./RadioGroup-1.0.6-adb96ecd.js";import{R as lt}from"./Radio-1.0.6-2befae95.js";import{c as Ar}from"./index-1.0.6-f35018af.js";import{F as Ke}from"./FormControlLabel-1.0.6-72a72881.js";import{F as Lr}from"./index.esm-1.0.6-d540f227.js";import{g as Or}from"./ActionsDml-1.0.6-4c91d556.js";import{T as zt}from"./Tabs-1.0.6-e49ea330.js";import"./AlertTitle-1.0.6-986ff958.js";import"./useSlot-1.0.6-8db722c4.js";import"./DateTimePicker-1.0.6-71307f11.js";import"./useMobilePicker-1.0.6-328fb89a.js";import"./date-time-utils-1.0.6-04701755.js";import"./dateViewRenderers-1.0.6-faae157e.js";import"./TimePicker-1.0.6-dfb27941.js";import"./DatePicker-1.0.6-75aa4c76.js";function Dr(t){return es("MuiSimpleTreeView",t)}ts("MuiSimpleTreeView",["root"]);const Nr=(t,s)=>{const r=p.useRef({}),[n,a]=p.useState(()=>{const d={};return t.forEach(l=>{l.models&&Object.entries(l.models).forEach(([c,x])=>{r.current[c]={isControlled:s[c]!==void 0,getDefaultValue:x.getDefaultValue},d[c]=x.getDefaultValue(s)})}),d});return Object.fromEntries(Object.entries(r.current).map(([d,l])=>{const c=l.isControlled?s[d]:n[d];return[d,{value:c,setControlledValue:x=>{l.isControlled||a(u=>D({},u,{[d]:x}))}}]}))};class Fr{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(s,r,n={}){let a=this.events[s];a||(a={highPriority:new Map,regular:new Map},this.events[s]=a),n.isFirst?a.highPriority.set(r,!0):a.regular.set(r,!0)}removeListener(s,r){this.events[s]&&(this.events[s].regular.delete(r),this.events[s].highPriority.delete(r))}removeAllListeners(){this.events={}}emit(s,...r){const n=this.events[s];if(!n)return;const a=Array.from(n.highPriority.keys()),o=Array.from(n.regular.keys());for(let d=a.length-1;d>=0;d-=1){const l=a[d];n.highPriority.has(l)&&l.apply(this,r)}for(let d=0;d<o.length;d+=1){const l=o[d];n.regular.has(l)&&l.apply(this,r)}}once(s,r){const n=this;this.on(s,function a(...o){n.removeListener(s,a),r.apply(n,o)})}}const Vr=(t,s)=>{const r=t.getNode(s),n=t.getNavigableChildrenIds(r.parentId),a=n.indexOf(s);if(a===0)return r.parentId;let o=n[a-1];for(;t.isItemExpanded(o)&&t.getNavigableChildrenIds(o).length>0;)o=t.getNavigableChildrenIds(o).pop();return o},Ct=(t,s)=>{if(t.isItemExpanded(s)&&t.getNavigableChildrenIds(s).length>0)return t.getNavigableChildrenIds(s)[0];let r=t.getNode(s);for(;r!=null;){const n=t.getNavigableChildrenIds(r.parentId),a=n[n.indexOf(r.id)+1];if(a)return a;r=t.getNode(r.parentId)}return null},vt=t=>{let s=t.getNavigableChildrenIds(null).pop();for(;t.isItemExpanded(s);)s=t.getNavigableChildrenIds(s).pop();return s},wt=t=>t.getNavigableChildrenIds(null)[0],de=(t,s)=>{Object.assign(t,s)},xs=(t,s)=>{Object.assign(t,s)},zr=t=>t.isPropagationStopped!==void 0,gs=({instance:t})=>{const[s]=p.useState(()=>new Fr),r=p.useCallback((...a)=>{const[o,d,l={}]=a;l.defaultMuiPrevented=!1,!(zr(l)&&l.isPropagationStopped())&&s.emit(o,d,l)},[s]),n=p.useCallback((a,o)=>(s.on(a,o),()=>{s.removeListener(a,o)}),[s]);de(t,{$$publishEvent:r,$$subscribeEvent:n})};gs.params={};const Br=[gs];function Kr(t){const s=p.useRef({});return t?(t.current==null&&(t.current={}),t.current):s.current}const Wr=t=>{const s=[...Br,...t.plugins],r=s.reduce((m,T)=>T.getDefaultizedParams?T.getDefaultizedParams(m):m,t),n=Nr(s,r),o=p.useRef({}).current,d=Kr(t.apiRef),l=p.useRef(null),c=ze(l,t.rootRef),[x,u]=p.useState(()=>{const m={};return s.forEach(T=>{T.getInitialState&&Object.assign(m,T.getInitialState(r))}),m}),i=[],h={publicAPI:d,instance:o},b=m=>{const T=m({instance:o,publicAPI:d,params:r,slots:r.slots,slotProps:r.slotProps,state:x,setState:u,rootRef:l,models:n})||{};T.getRootProps&&i.push(T.getRootProps),T.contextValue&&Object.assign(h,T.contextValue)};s.forEach(b),h.runItemPlugins=m=>{let T=null,v=null;return s.forEach(C=>{if(!C.itemPlugin)return;const S=C.itemPlugin({props:m,rootRef:T,contentRef:v});S!=null&&S.rootRef&&(T=S.rootRef),S!=null&&S.contentRef&&(v=S.contentRef)}),{contentRef:v,rootRef:T}};const j=s.map(m=>m.wrapItem).filter(m=>!!m);return h.wrapItem=({itemId:m,children:T})=>{let v=T;return j.forEach(C=>{v=C({itemId:m,children:v})}),v},{getRootProps:(m={})=>{const T=D({role:"tree"},m,{ref:c});return i.forEach(v=>{Object.assign(T,v(m))}),T},rootRef:c,contextValue:h,instance:o}},ms=p.createContext(null),$r=["element"];function Gr(t,s){let r=0,n=t.length-1;for(;r<=n;){const a=Math.floor((r+n)/2);if(t[a].element===s)return a;t[a].element.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_PRECEDING?n=a-1:r=a+1}return r}const hs=p.createContext({});function Ur(t){const s=p.useRef(null);return p.useEffect(()=>{s.current=t},[t]),s.current}const Bt=()=>{};function Hr(t){const[,s]=p.useState(),{registerDescendant:r=Bt,unregisterDescendant:n=Bt,descendants:a=[],parentId:o=null}=p.useContext(hs),d=a.findIndex(x=>x.element===t.element),l=Ur(a),c=a.some((x,u)=>l&&l[u]&&l[u].element!==x.element);return dr(()=>{if(t.element)return r(D({},t,{index:d})),()=>{n(t.element)};s({})},[r,n,d,c,t]),{parentId:o,index:d}}function fs(t){const{children:s,id:r}=t,[n,a]=p.useState([]),o=p.useCallback(c=>{let{element:x}=c,u=pe(c,$r);a(i=>{if(i.length===0)return[D({},u,{element:x,index:0})];const h=Gr(i,x);let b;if(i[h]&&i[h].element===x)b=i;else{const j=D({},u,{element:x,index:h});b=i.slice(),b.splice(h,0,j)}return b.forEach((j,f)=>{j.index=f}),b})},[]),d=p.useCallback(c=>{a(x=>x.filter(u=>c!==u.element))},[]),l=p.useMemo(()=>({descendants:n,registerDescendant:o,unregisterDescendant:d,parentId:r}),[n,o,d,r]);return e.jsx(hs.Provider,{value:l,children:s})}function qr(t){const{value:s,children:r}=t;return e.jsx(ms.Provider,{value:s,children:e.jsx(fs,{children:r})})}const bs=({instance:t,params:s})=>{const r=Gn(s.id),n=p.useCallback((a,o)=>o??`${r}-${a}`,[r]);return de(t,{getTreeItemId:n}),{getRootProps:()=>({id:r})}};bs.params={id:!0};const js=(t,s,r)=>{t.$$publishEvent(s,r)},ys=({items:t,isItemDisabled:s,getItemLabel:r,getItemId:n})=>{const a={},o={},d=(c,x,u)=>{var b,j;const i=n?n(c):c.id;if(i==null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.","An item was provided without id in the `items` prop:",JSON.stringify(c)].join(`
`));if(a[i]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Tow items were provided with the same id in the \`items\` prop: "${i}"`].join(`
`));const h=r?r(c):c.label;if(h==null)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","Alternatively, you can use the `getItemLabel` prop to specify a custom label for each item.","An item was provided without label in the `items` prop:",JSON.stringify(c)].join(`
`));return a[i]={id:i,label:h,index:x,parentId:u,idAttribute:void 0,expandable:!!((b=c.children)!=null&&b.length),disabled:s?s(c):!1},o[i]=c,{id:i,children:(j=c.children)==null?void 0:j.map((f,m)=>d(f,m,i))}},l=t.map((c,x)=>d(c,x,null));return{nodeMap:a,nodeTree:l,itemMap:o}},pt=({instance:t,publicAPI:s,params:r,state:n,setState:a})=>{const o=p.useCallback(j=>n.items.nodeMap[j],[n.items.nodeMap]),d=p.useCallback(j=>n.items.itemMap[j],[n.items.itemMap]),l=p.useCallback(j=>{if(j==null)return!1;let f=t.getNode(j);if(!f)return!1;if(f.disabled)return!0;for(;f.parentId!=null;)if(f=t.getNode(f.parentId),f.disabled)return!0;return!1},[t]),c=p.useCallback(j=>Object.values(n.items.nodeMap).filter(f=>f.parentId===j).sort((f,m)=>f.index-m.index).map(f=>f.id),[n.items.nodeMap]),x=j=>{let f=t.getChildrenIds(j);return r.disabledItemsFocusable||(f=f.filter(m=>!t.isItemDisabled(m))),f},u=p.useRef(!1),i=p.useCallback(()=>{u.current=!0},[]),h=p.useCallback(()=>u.current,[]);return p.useEffect(()=>{t.areItemUpdatesPrevented()||a(j=>{const f=ys({items:r.items,isItemDisabled:r.isItemDisabled,getItemId:r.getItemId,getItemLabel:r.getItemLabel});return Object.values(j.items.nodeMap).forEach(m=>{f.nodeMap[m.id]||js(t,"removeItem",{id:m.id})}),D({},j,{items:f})})},[t,a,r.items,r.isItemDisabled,r.getItemId,r.getItemLabel]),de(t,{getNode:o,getItem:d,getItemsToRender:()=>{const j=({id:f,children:m})=>{const T=n.items.nodeMap[f];return{label:T.label,itemId:T.id,id:T.idAttribute,children:m==null?void 0:m.map(j)}};return n.items.nodeTree.map(j)},getChildrenIds:c,getNavigableChildrenIds:x,isItemDisabled:l,preventItemUpdates:i,areItemUpdatesPrevented:h}),xs(s,{getItem:d}),{contextValue:{disabledItemsFocusable:r.disabledItemsFocusable}}};pt.getInitialState=t=>({items:ys({items:t.items,isItemDisabled:t.isItemDisabled,getItemId:t.getItemId,getItemLabel:t.getItemLabel})});pt.getDefaultizedParams=t=>D({},t,{disabledItemsFocusable:t.disabledItemsFocusable??!1});pt.params={disabledItemsFocusable:!0,items:!0,isItemDisabled:!0,getItemLabel:!0,getItemId:!0};const xt=({instance:t,params:s,models:r})=>{const n=(c,x)=>{var u;(u=s.onExpandedItemsChange)==null||u.call(s,c,x),r.expandedItems.setControlledValue(x)},a=p.useCallback(c=>Array.isArray(r.expandedItems.value)?r.expandedItems.value.indexOf(c)!==-1:!1,[r.expandedItems.value]),o=p.useCallback(c=>{var x;return!!((x=t.getNode(c))!=null&&x.expandable)},[t]),d=ne((c,x)=>{if(x==null)return;const u=r.expandedItems.value.indexOf(x)!==-1;let i;u?i=r.expandedItems.value.filter(h=>h!==x):i=[x].concat(r.expandedItems.value),s.onItemExpansionToggle&&s.onItemExpansionToggle(c,x,!u),n(c,i)});de(t,{isItemExpanded:a,isItemExpandable:o,toggleItemExpansion:d,expandAllSiblings:(c,x)=>{const u=t.getNode(x),h=t.getChildrenIds(u.parentId).filter(j=>t.isItemExpandable(j)&&!t.isItemExpanded(j)),b=r.expandedItems.value.concat(h);h.length>0&&(s.onItemExpansionToggle&&h.forEach(j=>{s.onItemExpansionToggle(c,j,!0)}),n(c,b))}})};xt.models={expandedItems:{getDefaultValue:t=>t.defaultExpandedItems}};const Xr=[];xt.getDefaultizedParams=t=>D({},t,{defaultExpandedItems:t.defaultExpandedItems??Xr});xt.params={expandedItems:!0,defaultExpandedItems:!0,onExpandedItemsChange:!0,onItemExpansionToggle:!0};const Jr=(t,s,r)=>{if(s===r)return[s,r];const n=t.getNode(s),a=t.getNode(r);if(n.parentId===a.id||a.parentId===n.id)return a.parentId===n.id?[n.id,a.id]:[a.id,n.id];const o=[n.id],d=[a.id];let l=n.parentId,c=a.parentId,x=d.indexOf(l)!==-1,u=o.indexOf(c)!==-1,i=!0,h=!0;for(;!u&&!x;)i&&(o.push(l),x=d.indexOf(l)!==-1,i=l!==null,!x&&i&&(l=t.getNode(l).parentId)),h&&!x&&(d.push(c),u=o.indexOf(c)!==-1,h=c!==null,!u&&h&&(c=t.getNode(c).parentId));const b=x?l:c,j=t.getChildrenIds(b),f=o[o.indexOf(b)-1],m=d[d.indexOf(b)-1];return j.indexOf(f)<j.indexOf(m)?[s,r]:[r,s]},gt=({instance:t,params:s,models:r})=>{const n=p.useRef(null),a=p.useRef(!1),o=p.useRef([]),d=(f,m)=>{if(s.onItemSelectionToggle)if(s.multiSelect){const T=m.filter(C=>!t.isItemSelected(C)),v=r.selectedItems.value.filter(C=>!m.includes(C));T.forEach(C=>{s.onItemSelectionToggle(f,C,!0)}),v.forEach(C=>{s.onItemSelectionToggle(f,C,!1)})}else m!==r.selectedItems.value&&(r.selectedItems.value!=null&&s.onItemSelectionToggle(f,r.selectedItems.value,!1),m!=null&&s.onItemSelectionToggle(f,m,!0));s.onSelectedItemsChange&&s.onSelectedItemsChange(f,m),r.selectedItems.setControlledValue(m)},l=f=>Array.isArray(r.selectedItems.value)?r.selectedItems.value.indexOf(f)!==-1:r.selectedItems.value===f,c=(f,m,T=!1)=>{if(!s.disableSelection){if(T){if(Array.isArray(r.selectedItems.value)){let v;r.selectedItems.value.indexOf(m)!==-1?v=r.selectedItems.value.filter(C=>C!==m):v=[m].concat(r.selectedItems.value),d(f,v)}}else{const v=s.multiSelect?[m]:m;d(f,v)}n.current=m,a.current=!1,o.current=[]}},x=(f,m)=>{const[T,v]=Jr(t,f,m),C=[T];let S=T;for(;S!==v;)S=Ct(t,S),C.push(S);return C},u=(f,m)=>{let T=r.selectedItems.value.slice();const{start:v,next:C,current:S}=m;!C||!S||(o.current.indexOf(S)===-1&&(o.current=[]),a.current?o.current.indexOf(C)!==-1?(T=T.filter(w=>w===v||w!==S),o.current=o.current.filter(w=>w===v||w!==S)):(T.push(C),o.current.push(C)):(T.push(C),o.current.push(S,C)),d(f,T))},i=(f,m)=>{let T=r.selectedItems.value.slice();const{start:v,end:C}=m;a.current&&(T=T.filter(P=>o.current.indexOf(P)===-1));let S=x(v,C);S=S.filter(P=>!t.isItemDisabled(P)),o.current=S;let w=T.concat(S);w=w.filter((P,N)=>w.indexOf(P)===N),d(f,w)};return de(t,{isItemSelected:l,selectItem:c,selectRange:(f,m,T=!1)=>{if(s.disableSelection)return;const{start:v=n.current,end:C,current:S}=m;T?u(f,{start:v,next:C,current:S}):v!=null&&C!=null&&i(f,{start:v,end:C}),a.current=!0},rangeSelectToLast:(f,m)=>{n.current||(n.current=m);const T=a.current?n.current:m;t.selectRange(f,{start:T,end:vt(t)})},rangeSelectToFirst:(f,m)=>{n.current||(n.current=m);const T=a.current?n.current:m;t.selectRange(f,{start:T,end:wt(t)})}}),{getRootProps:()=>({"aria-multiselectable":s.multiSelect}),contextValue:{selection:{multiSelect:s.multiSelect}}}};gt.models={selectedItems:{getDefaultValue:t=>t.defaultSelectedItems}};const Yr=[];gt.getDefaultizedParams=t=>D({},t,{disableSelection:t.disableSelection??!1,multiSelect:t.multiSelect??!1,defaultSelectedItems:t.defaultSelectedItems??(t.multiSelect?Yr:null)});gt.params={disableSelection:!0,multiSelect:!0,defaultSelectedItems:!0,selectedItems:!0,onSelectedItemsChange:!0,onItemSelectionToggle:!0};const Kt=1e3;class Qr{constructor(s=Kt){this.timeouts=new Map,this.cleanupTimeout=Kt,this.cleanupTimeout=s}register(s,r,n){this.timeouts||(this.timeouts=new Map);const a=setTimeout(()=>{typeof r=="function"&&r(),this.timeouts.delete(n.cleanupToken)},this.cleanupTimeout);this.timeouts.set(n.cleanupToken,a)}unregister(s){const r=this.timeouts.get(s.cleanupToken);r&&(this.timeouts.delete(s.cleanupToken),clearTimeout(r))}reset(){this.timeouts&&(this.timeouts.forEach((s,r)=>{this.unregister({cleanupToken:r})}),this.timeouts=void 0)}}class Zr{constructor(){this.registry=new FinalizationRegistry(s=>{typeof s=="function"&&s()})}register(s,r,n){this.registry.register(s,r,n)}unregister(s){this.registry.unregister(s)}reset(){}}class eo{}function to(t){let s=0;return function(n,a,o){t.registry===null&&(t.registry=typeof FinalizationRegistry<"u"?new Zr:new Qr);const[d]=p.useState(new eo),l=p.useRef(null),c=p.useRef();c.current=o;const x=p.useRef(null);if(!l.current&&c.current){const u=(i,h)=>{var b;h.defaultMuiPrevented||(b=c.current)==null||b.call(c,i,h)};l.current=n.$$subscribeEvent(a,u),s+=1,x.current={cleanupToken:s},t.registry.register(d,()=>{var i;(i=l.current)==null||i.call(l),l.current=null,x.current=null},x.current)}else!c.current&&l.current&&(l.current(),l.current=null,x.current&&(t.registry.unregister(x.current),x.current=null));p.useEffect(()=>{if(!l.current&&c.current){const u=(i,h)=>{var b;h.defaultMuiPrevented||(b=c.current)==null||b.call(c,i,h)};l.current=n.$$subscribeEvent(a,u)}return x.current&&t.registry&&(t.registry.unregister(x.current),x.current=null),()=>{var u;(u=l.current)==null||u.call(l),l.current=null}},[n,a])}}const so={registry:null},no=to(so),Is=(t=document)=>{const s=t.activeElement;return s?s.shadowRoot?Is(s.shadowRoot):s:null},ro=(t,s)=>{const r=a=>{const o=t.getNode(a);return o&&(o.parentId==null||t.isItemExpanded(o.parentId))};let n;return Array.isArray(s)?n=s.find(r):s!=null&&r(s)&&(n=s),n==null&&(n=t.getNavigableChildrenIds(null)[0]),n},Rt=({instance:t,publicAPI:s,params:r,state:n,setState:a,models:o,rootRef:d})=>{const l=ro(t,o.selectedItems.value),c=ne(S=>{const w=typeof S=="function"?S(n.focusedItemId):S;n.focusedItemId!==w&&a(P=>D({},P,{focusedItemId:w}))}),x=p.useCallback(()=>!!d.current&&d.current.contains(Is(Un(d.current))),[d]),u=p.useCallback(S=>n.focusedItemId===S&&x(),[n.focusedItemId,x]),i=S=>{const w=t.getNode(S);return w&&(w.parentId==null||t.isItemExpanded(w.parentId))},h=(S,w)=>{const P=t.getNode(w),N=document.getElementById(t.getTreeItemId(w,P.idAttribute));N&&N.focus(),c(w),r.onItemFocus&&r.onItemFocus(S,w)},b=ne((S,w)=>{i(w)&&h(S,w)}),j=ne(S=>{let w;Array.isArray(o.selectedItems.value)?w=o.selectedItems.value.find(i):o.selectedItems.value!=null&&i(o.selectedItems.value)&&(w=o.selectedItems.value),w==null&&(w=t.getNavigableChildrenIds(null)[0]),h(S,w)}),f=ne(()=>{if(n.focusedItemId==null)return;const S=t.getNode(n.focusedItemId);if(S){const w=document.getElementById(t.getTreeItemId(n.focusedItemId,S.idAttribute));w&&w.blur()}c(null)});de(t,{isItemFocused:u,canItemBeTabbed:S=>S===l,focusItem:b,focusDefaultItem:j,removeFocusedItem:f}),xs(s,{focusItem:b}),no(t,"removeItem",({id:S})=>{n.focusedItemId===S&&t.focusDefaultItem(null)});const T=S=>w=>{var P;(P=S.onFocus)==null||P.call(S,w),w.target===w.currentTarget&&t.focusDefaultItem(w)},v=t.getNode(n.focusedItemId),C=v?t.getTreeItemId(v.id,v.idAttribute):null;return{getRootProps:S=>({onFocus:T(S),"aria-activedescendant":C??void 0})}};Rt.getInitialState=()=>({focusedItemId:null});Rt.params={onItemFocus:!0};function oo(t){return!!t&&t.length===1&&!!t.match(/\S/)}function Wt(t,s,r){for(let n=s;n<t.length;n+=1)if(r===t[n])return n;return-1}const Ts=({instance:t,params:s,state:r})=>{const a=Hn().direction==="rtl",o=p.useRef({}),d=ne(i=>{o.current=i(o.current)});p.useEffect(()=>{if(t.areItemUpdatesPrevented())return;const i={},h=b=>{i[b.id]=b.label.substring(0,1).toLowerCase()};Object.values(r.items.nodeMap).forEach(h),o.current=i},[r.items.nodeMap,s.getItemId,t]);const l=(i,h)=>{let b,j;const f=h.toLowerCase(),m=[],T=[];return Object.keys(o.current).forEach(v=>{const C=t.getNode(v),S=C.parentId?t.isItemExpanded(C.parentId):!0,w=s.disabledItemsFocusable?!1:t.isItemDisabled(v);S&&!w&&(m.push(v),T.push(o.current[v]))}),b=m.indexOf(i)+1,b>=m.length&&(b=0),j=Wt(T,b,f),j===-1&&(j=Wt(T,0,f)),j>-1?m[j]:null},c=i=>!s.disableSelection&&!t.isItemDisabled(i),x=i=>!t.isItemDisabled(i)&&t.isItemExpandable(i);de(t,{updateFirstCharMap:d,handleItemKeyDown:(i,h)=>{if(i.defaultMuiPrevented||i.altKey||i.currentTarget!==i.target)return;const b=i.ctrlKey||i.metaKey,j=i.key;switch(!0){case(j===" "&&c(h)):{i.preventDefault(),s.multiSelect&&i.shiftKey?t.selectRange(i,{end:h}):s.multiSelect?t.selectItem(i,h,!0):t.selectItem(i,h);break}case j==="Enter":{x(h)?(t.toggleItemExpansion(i,h),i.preventDefault()):c(h)&&(s.multiSelect?(i.preventDefault(),t.selectItem(i,h,!0)):t.isItemSelected(h)||(t.selectItem(i,h),i.preventDefault()));break}case j==="ArrowDown":{const f=Ct(t,h);f&&(i.preventDefault(),t.focusItem(i,f),s.multiSelect&&i.shiftKey&&c(f)&&t.selectRange(i,{end:f,current:h},!0));break}case j==="ArrowUp":{const f=Vr(t,h);f&&(i.preventDefault(),t.focusItem(i,f),s.multiSelect&&i.shiftKey&&c(f)&&t.selectRange(i,{end:f,current:h},!0));break}case(j==="ArrowRight"&&!a||j==="ArrowLeft"&&a):{if(t.isItemExpanded(h)){const f=Ct(t,h);f&&(t.focusItem(i,f),i.preventDefault())}else x(h)&&(t.toggleItemExpansion(i,h),i.preventDefault());break}case(j==="ArrowLeft"&&!a||j==="ArrowRight"&&a):{if(x(h)&&t.isItemExpanded(h))t.toggleItemExpansion(i,h),i.preventDefault();else{const f=t.getNode(h).parentId;f&&(t.focusItem(i,f),i.preventDefault())}break}case j==="Home":{t.focusItem(i,wt(t)),c(h)&&s.multiSelect&&b&&i.shiftKey&&t.rangeSelectToFirst(i,h),i.preventDefault();break}case j==="End":{t.focusItem(i,vt(t)),c(h)&&s.multiSelect&&b&&i.shiftKey&&t.rangeSelectToLast(i,h),i.preventDefault();break}case j==="*":{t.expandAllSiblings(i,h),i.preventDefault();break}case(j==="a"&&b&&s.multiSelect&&!s.disableSelection):{t.selectRange(i,{start:wt(t),end:vt(t)}),i.preventDefault();break}case(!b&&!i.shiftKey&&oo(j)):{const f=l(h,j);f!=null&&(t.focusItem(i,f),i.preventDefault());break}}}})};Ts.params={};const Ss=({slots:t,slotProps:s})=>({contextValue:{icons:{slots:{collapseIcon:t.collapseIcon,expandIcon:t.expandIcon,endIcon:t.endIcon},slotProps:{collapseIcon:s.collapseIcon,expandIcon:s.expandIcon,endIcon:s.endIcon}}}});Ss.params={};const ao=[bs,pt,xt,gt,Rt,Ts,Ss],mt=()=>{const t=p.useContext(ms);if(t==null)throw new Error(["MUI X: Could not find the Tree View context.","It looks like you rendered your component outside of a SimpleTreeView or RichTreeView parent component.","This can also happen if you are bundling multiple versions of the Tree View."].join(`
`));return t},ht=({instance:t,setState:s})=>{t.preventItemUpdates();const r=ne(o=>{s(d=>{if(d.items.nodeMap[o.id]!=null)throw new Error(["MUI X: The Tree View component requires all items to have a unique `id` property.","Alternatively, you can use the `getItemId` prop to specify a custom id for each item.",`Tow items were provided with the same id in the \`items\` prop: "${o.id}"`].join(`
`));return D({},d,{items:D({},d.items,{nodeMap:D({},d.items.nodeMap,{[o.id]:o}),itemMap:D({},d.items.itemMap,{[o.id]:{id:o.id,label:o.label}})})})})}),n=ne(o=>{s(d=>{const l=D({},d.items.nodeMap),c=D({},d.items.itemMap);return delete l[o],delete c[o],D({},d,{items:D({},d.items,{nodeMap:l,itemMap:c})})}),js(t,"removeItem",{id:o})}),a=ne((o,d)=>(t.updateFirstCharMap(l=>(l[o]=d,l)),()=>{t.updateFirstCharMap(l=>{const c=D({},l);return delete c[o],c})}));de(t,{insertJSXItem:r,removeJSXItem:n,mapFirstCharFromJSX:a})},io=({props:t,rootRef:s,contentRef:r})=>{const{children:n,disabled:a=!1,label:o,itemId:d,id:l}=t,{instance:c}=mt(),x=C=>Array.isArray(C)?C.length>0&&C.some(x):!!C,u=x(n),[i,h]=p.useState(null),b=p.useRef(null),j=ze(h,s),f=ze(b,r),m=p.useMemo(()=>({element:i,id:d}),[d,i]),{index:T,parentId:v}=Hr(m);return p.useEffect(()=>{if(T!==-1)return c.insertJSXItem({id:d,idAttribute:l,index:T,parentId:v,expandable:u,disabled:a}),()=>c.removeJSXItem(d)},[c,v,T,d,u,a,l]),p.useEffect(()=>{var C;if(o)return c.mapFirstCharFromJSX(d,(((C=b.current)==null?void 0:C.textContent)??"").substring(0,1).toLowerCase())},[c,d,o]),{contentRef:f,rootRef:j}};ht.itemPlugin=io;ht.wrapItem=({children:t,itemId:s})=>e.jsx(fs,{id:s,children:t});ht.params={};const lo=[...ao,ht],co=(t,s="warning")=>{let r=!1;const n=Array.isArray(t)?t.join(`
`):t;return()=>{r||(r=!0,s==="error"?console.error(n):console.warn(n))}},uo=["slots","slotProps","apiRef"],po=t=>{let{props:{slots:s,slotProps:r,apiRef:n},plugins:a,rootRef:o}=t,d=pe(t.props,uo);const l={};a.forEach(u=>{Object.assign(l,u.params)});const c={plugins:a,rootRef:o,slots:s??{},slotProps:r??{},apiRef:n},x={};return Object.keys(d).forEach(u=>{const i=d[u];l[u]?c[u]=i:x[u]=i}),{pluginParams:c,slots:s,slotProps:r,otherProps:x}},xo=t=>{const{classes:s}=t;return ns({root:["root"]},Dr,s)},go=ut("ul",{name:"MuiSimpleTreeView",slot:"Root",overridesResolver:(t,s)=>s.root})({padding:0,margin:0,listStyle:"none",outline:0}),mo=[];co(["MUI X: The `SimpleTreeView` component does not support the `items` prop.","If you want to add items, you need to pass them as JSX children.","Check the documentation for more details: https://mui.com/x/react-tree-view/simple-tree-view/items/"]);const Ue=p.forwardRef(function(s,r){const n=ss({props:s,name:"MuiSimpleTreeView"}),a=n,{pluginParams:o,slots:d,slotProps:l,otherProps:c}=po({props:D({},n,{items:mo}),plugins:lo,rootRef:r}),{getRootProps:x,contextValue:u}=Wr(o),i=xo(n),h=(d==null?void 0:d.root)??go,b=Oe({elementType:h,externalSlotProps:l==null?void 0:l.root,externalForwardedProps:c,className:i.root,getSlotProps:x,ownerState:a});return e.jsx(qr,{value:u,children:e.jsx(h,D({},b))})});function ho(t){const{instance:s,selection:{multiSelect:r}}=mt(),n=s.isItemExpandable(t),a=s.isItemExpanded(t),o=s.isItemFocused(t),d=s.isItemSelected(t),l=s.isItemDisabled(t);return{disabled:l,expanded:a,selected:d,focused:o,handleExpansion:i=>{if(!l){o||s.focusItem(i,t);const h=r&&(i.shiftKey||i.ctrlKey||i.metaKey);n&&!(h&&s.isItemExpanded(t))&&s.toggleItemExpansion(i,t)}},handleSelection:i=>{l||(o||s.focusItem(i,t),r&&(i.shiftKey||i.ctrlKey||i.metaKey)?i.shiftKey?s.selectRange(i,{end:t}):s.selectItem(i,t,!0):s.selectItem(i,t))},preventSelection:i=>{(i.shiftKey||i.ctrlKey||i.metaKey||l)&&i.preventDefault()}}}const fo=["classes","className","displayIcon","expansionIcon","icon","label","itemId","onClick","onMouseDown"],Cs=p.forwardRef(function(s,r){const{classes:n,className:a,displayIcon:o,expansionIcon:d,icon:l,label:c,itemId:x,onClick:u,onMouseDown:i}=s,h=pe(s,fo),{disabled:b,expanded:j,selected:f,focused:m,handleExpansion:T,handleSelection:v,preventSelection:C}=ho(x),S=l||d||o,w=N=>{C(N),i&&i(N)},P=N=>{T(N),v(N),u&&u(N)};return e.jsxs("div",D({},h,{className:rs(a,n.root,j&&n.expanded,f&&n.selected,m&&n.focused,b&&n.disabled),onClick:P,onMouseDown:w,ref:r,children:[e.jsx("div",{className:n.iconContainer,children:S}),e.jsx("div",{className:n.label,children:c})]}))});function bo(t){return es("MuiTreeItem",t)}const ie=ts("MuiTreeItem",["root","groupTransition","content","expanded","selected","focused","disabled","iconContainer","label"]),jo=us(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"TreeViewExpandIcon"),yo=us(e.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"TreeViewCollapseIcon");function vs(t){const{children:s,itemId:r}=t,{wrapItem:n}=mt();return n({children:s,itemId:r})}vs.propTypes={children:Nt.node,itemId:Nt.string.isRequired};const Io=["children","className","slots","slotProps","ContentComponent","ContentProps","itemId","id","label","onClick","onMouseDown","onFocus","onBlur","onKeyDown"],To=["ownerState"],So=["ownerState"],Co=["ownerState"],vo=t=>{const{classes:s}=t;return ns({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],groupTransition:["groupTransition"]},bo,s)},wo=ut("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(t,s)=>s.root})({listStyle:"none",margin:0,padding:0,outline:0}),Eo=ut(Cs,{name:"MuiTreeItem",slot:"Content",overridesResolver:(t,s)=>[s.content,s.iconContainer&&{[`& .${ie.iconContainer}`]:s.iconContainer},s.label&&{[`& .${ie.label}`]:s.label}]})(({theme:t})=>({padding:t.spacing(.5,1),borderRadius:t.shape.borderRadius,width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",gap:t.spacing(1),cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ie.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${ie.focused}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${ie.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:et(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:et(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:et(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${ie.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:et(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`& .${ie.iconContainer}`]:{width:16,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${ie.label}`]:D({width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},t.typography.body1)})),ko=ut(gr,{name:"MuiTreeItem",slot:"GroupTransition",overridesResolver:(t,s)=>s.groupTransition})({margin:0,padding:0,paddingLeft:12}),ee=p.forwardRef(function(s,r){const{icons:n,runItemPlugins:a,selection:{multiSelect:o},disabledItemsFocusable:d,instance:l}=mt(),c=ss({props:s,name:"MuiTreeItem"}),{children:x,className:u,slots:i,slotProps:h,ContentComponent:b=Cs,ContentProps:j,itemId:f,id:m,label:T,onClick:v,onMouseDown:C,onBlur:S,onKeyDown:w}=c,P=pe(c,Io),{contentRef:N,rootRef:z}=a(c),R=ze(r,z),E=ze(j==null?void 0:j.ref,N),k={expandIcon:(i==null?void 0:i.expandIcon)??n.slots.expandIcon??jo,collapseIcon:(i==null?void 0:i.collapseIcon)??n.slots.collapseIcon??yo,endIcon:(i==null?void 0:i.endIcon)??n.slots.endIcon,icon:i==null?void 0:i.icon,groupTransition:i==null?void 0:i.groupTransition},_=B=>Array.isArray(B)?B.length>0&&B.some(_):!!B,M=_(x),O=l.isItemExpanded(f),V=l.isItemFocused(f),ae=l.isItemSelected(f),G=l.isItemDisabled(f),se=D({},c,{expanded:O,focused:V,selected:ae,disabled:G}),J=vo(se),Me=k.groupTransition??void 0,He=Oe({elementType:Me,ownerState:{},externalSlotProps:h==null?void 0:h.groupTransition,additionalProps:{unmountOnExit:!0,in:O,component:"ul",role:"group"},className:J.groupTransition}),fe=O?k.collapseIcon:k.expandIcon,qe=Oe({elementType:fe,ownerState:{},externalSlotProps:B=>O?D({},be(n.slotProps.collapseIcon,B),be(h==null?void 0:h.collapseIcon,B)):D({},be(n.slotProps.expandIcon,B),be(h==null?void 0:h.expandIcon,B))}),Xe=pe(qe,To),I=M&&fe?e.jsx(fe,D({},Xe)):null,Y=M?void 0:k.endIcon,Rs=Oe({elementType:Y,ownerState:{},externalSlotProps:B=>M?{}:D({},be(n.slotProps.endIcon,B),be(h==null?void 0:h.endIcon,B))}),Ms=pe(Rs,So),As=Y?e.jsx(Y,D({},Ms)):null,ft=k.icon,Ls=Oe({elementType:ft,ownerState:{},externalSlotProps:h==null?void 0:h.icon}),Os=pe(Ls,Co),Ds=ft?e.jsx(ft,D({},Os)):null;let bt;o?bt=ae:ae&&(bt=!0);function Ns(B){!V&&(!G||d)&&B.currentTarget===B.target&&l.focusItem(B,f)}function Fs(B){S==null||S(B),l.removeFocusedItem()}const Vs=B=>{w==null||w(B),l.handleItemKeyDown(B,f)},zs=l.getTreeItemId(f,m),Bs=l.canItemBeTabbed(f)?0:-1;return e.jsx(vs,{itemId:f,children:e.jsxs(wo,D({className:rs(J.root,u),role:"treeitem","aria-expanded":M?O:void 0,"aria-selected":bt,"aria-disabled":G||void 0,id:zs,tabIndex:Bs},P,{ownerState:se,onFocus:Ns,onBlur:Fs,onKeyDown:Vs,ref:R,children:[e.jsx(Eo,D({as:b,classes:{root:J.content,expanded:J.expanded,selected:J.selected,focused:J.focused,disabled:J.disabled,iconContainer:J.iconContainer,label:J.label},label:T,itemId:f,onClick:v,onMouseDown:C,icon:Ds,expansionIcon:I,displayIcon:As,ownerState:se},j,{ref:E})),x&&e.jsx(ko,D({as:Me},He,{children:x}))]}))})}),ue=()=>e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px",padding:"30px"},children:[e.jsx(qn,{sx:{width:"1em !important",height:"1em !important"}}),e.jsx(Se,{children:"Loading..."})]}),_e={columns:[],data:[],initialState:{},enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!0},muiTableHeadCellProps:{sx:{paddingTop:"1rem",paddingRight:"1rem",paddingBottom:"1rem",paddingLeft:"1rem"}},muiTableBodyCellProps:{sx:{verticalAlign:"top"}},muiTableProps:{sx:{border:"unset","& th, td":{borderTop:"unset",borderRight:"unset",borderLeft:"unset"}}},muiTablePaperProps:{sx:{boxShadow:"none",marginRight:"30px",marginBottom:"40px"}}},Re=({msg:t})=>e.jsx(y,{sx:{padding:"1rem 0",marginBottom:"20px"},children:e.jsx(Se,{children:t})}),Po=p.lazy(()=>oe(()=>import("./Alert-1.0.6-728945e9.js"),["./Alert-1.0.6-728945e9.js","./main-1.0.6.js","./index.esm-1.0.6-f58f385b.js","./iconBase-1.0.6-b8af29f5.js","./AlertTitle-1.0.6-986ff958.js","./Close-1.0.6-4b5eac8d.js","./useSlot-1.0.6-8db722c4.js"],import.meta.url)),_o=({dbs:t,tbl:s})=>{g.debug(t,s);const r=H(),n=A(u=>Ks(u,t,s));g.debug(n);const a=A(u=>Ws(u,t,s));g.debug(a);const[o,d]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{On(t,s,u=>{const i=u==null?void 0:u.data;g.debug("response data",i),r($s({dbs:t,tbl:s,cls:i}))},u=>{g.error("error",u),d(u??F.contactSupport)})},c=p.useMemo(()=>[{accessorKey:"ordinal_position",header:"#",size:40},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"column_type",header:"Column type",size:100},{accessorKey:"is_nullable",header:"Nullable?",size:50},{accessorKey:"character_maximum_length",header:"Max length",size:70,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_precision",header:"Precision",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"numeric_scale",header:"Scale",size:60,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"extra",header:"Extra",size:100},{accessorKey:"column_default",header:"Default value",size:100}],[]),x=ke({..._e,columns:c,data:a,initialState:{columnOrder:["ordinal_position","column_name","column_type","is_nullable","extra","column_default","character_maximum_length","numeric_precision","numeric_scale"],density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return g.debug(x),o!==""?e.jsx(p.Suspense,{children:e.jsx(Po,{severity:"error",message:o,close:!1})}):n?n&&a.length===0?e.jsx(Re,{msg:"Table has no columns"}):(g.debug(a),e.jsx(Pe,{table:x})):e.jsx(ue,{})},Ro=p.lazy(()=>oe(()=>import("./Alert-1.0.6-728945e9.js"),["./Alert-1.0.6-728945e9.js","./main-1.0.6.js","./index.esm-1.0.6-f58f385b.js","./iconBase-1.0.6-b8af29f5.js","./AlertTitle-1.0.6-986ff958.js","./Close-1.0.6-4b5eac8d.js","./useSlot-1.0.6-8db722c4.js"],import.meta.url)),Mo=({dbs:t,tbl:s})=>{g.debug(t,s);const r=H(),n=A(u=>Gs(u,t,s));g.debug(n);const a=A(u=>Us(u,t,s));g.debug(a);const[o,d]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{Dn(t,s,u=>{const i=u==null?void 0:u.data;g.debug("response data",i),r(Hs({dbs:t,tbl:s,idx:i}))},u=>{g.error("error",u),d(u??F.contactSupport)})},c=p.useMemo(()=>[{accessorKey:"index_name",header:"Index name",size:100},{accessorKey:"non_unique",header:"Unique",size:80},{accessorKey:"seq_in_name",header:"#",size:40,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"collation",header:"Collation",size:80},{accessorKey:"nullable",header:"Nullable?",size:80},{accessorKey:"index_type",header:"Index type",size:100},{accessorKey:"cardinality",header:"Cardinality",size:80,muiTableHeadCellProps:{align:"right"},muiTableBodyCellProps:{align:"right"}}],[]),x=ke({..._e,columns:c,data:a,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return g.debug(x),o!==""?e.jsx(p.Suspense,{children:e.jsx(Ro,{severity:"error",message:o,close:!1})}):n?n&&a.length===0?e.jsx(Re,{msg:"Table has no indexes"}):e.jsx(Pe,{table:x}):e.jsx(ue,{})},Ao=p.lazy(()=>oe(()=>import("./Alert-1.0.6-728945e9.js"),["./Alert-1.0.6-728945e9.js","./main-1.0.6.js","./index.esm-1.0.6-f58f385b.js","./iconBase-1.0.6-b8af29f5.js","./AlertTitle-1.0.6-986ff958.js","./Close-1.0.6-4b5eac8d.js","./useSlot-1.0.6-8db722c4.js"],import.meta.url)),Lo=({dbs:t,tbl:s})=>{g.debug(t,s);const r=H(),n=A(u=>qs(u,t,s));g.debug(n);const a=A(u=>Xs(u,t,s));g.debug(a);const[o,d]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{Nn(t,s,u=>{const i=u==null?void 0:u.data;g.debug("response data",i),r(Js({dbs:t,tbl:s,trg:i}))},u=>{g.error("error",u),d(u??F.contactSupport)})},c=p.useMemo(()=>[{accessorKey:"trigger_name",header:"Trigger name",size:120},{accessorKey:"event_manipulation",header:"Event",size:80},{accessorKey:"action_timing",header:"Timin",size:80},{accessorKey:"action_statement",header:"SQL",size:200,Cell:({cell:u})=>e.jsx("pre",{style:{padding:0,margin:0},children:u.getValue()})}],[]),x=ke({..._e,columns:c,data:a,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return g.debug(x),o!==""?e.jsx(p.Suspense,{children:e.jsx(Ao,{severity:"error",message:o,close:!1})}):n?n&&a.length===0?e.jsx(Re,{msg:"Table has no triggers"}):e.jsx(Pe,{table:x}):e.jsx(ue,{})},Oo=p.lazy(()=>oe(()=>import("./Alert-1.0.6-728945e9.js"),["./Alert-1.0.6-728945e9.js","./main-1.0.6.js","./index.esm-1.0.6-f58f385b.js","./iconBase-1.0.6-b8af29f5.js","./AlertTitle-1.0.6-986ff958.js","./Close-1.0.6-4b5eac8d.js","./useSlot-1.0.6-8db722c4.js"],import.meta.url)),Do=({dbs:t,tbl:s})=>{g.debug(t,s);const r=H(),n=A(u=>Ys(u,t,s));g.debug(n);const a=A(u=>Qs(u,t,s));g.debug(a);const[o,d]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{Fn(t,s,u=>{const i=u==null?void 0:u.data;g.debug("response data",i),r(Zs({dbs:t,tbl:s,frk:i}))},u=>{g.error("error",u),d(u)})},c=p.useMemo(()=>[{accessorKey:"constraint_name",header:"Constraint name",size:100},{accessorKey:"column_name",header:"Column name",size:100},{accessorKey:"referenced_table_name",header:"Referenced table",size:100},{accessorKey:"referenced_column_name",header:"Referenced column",size:100}],[]),x=ke({..._e,columns:c,data:a,initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return g.debug(x),o!==""?e.jsx(p.Suspense,{children:e.jsx(Oo,{severity:"error",message:o,close:!1})}):n?n&&a.length===0?e.jsx(Re,{msg:"Table contains no foreign keys"}):e.jsx(Pe,{table:x}):e.jsx(ue,{})};var W=(t=>(t[t.TABLE=0]="TABLE",t[t.VIEW=1]="VIEW",t))(W||{});const ws=p.memo(({dbs:t,tbl:s,typ:r})=>(g.debug(t,s,r),e.jsxs(Ue,{"aria-label":"Columns and indexes",slots:{expandIcon:te,collapseIcon:$e},sx:{display:"grid",gap:"0"},children:[e.jsx(ee,{itemId:"columns",label:e.jsxs(y,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(Xn,{}),e.jsx("span",{children:"Columns"})]}),sx:{padding:0,minWidth:0},children:e.jsx(_o,{dbs:t,tbl:s})}),r===W.TABLE&&e.jsxs(e.Fragment,{children:[e.jsx(ee,{itemId:"indexes",label:e.jsxs(y,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(Jn,{}),e.jsx("span",{children:"Indexes"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Mo,{dbs:t,tbl:s})}),e.jsx(ee,{itemId:"foreignkeys",label:e.jsxs(y,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(pr,{}),e.jsx("span",{children:"Foreign Keys"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Do,{dbs:t,tbl:s})}),e.jsx(ee,{itemId:"triggers",label:e.jsxs(y,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",gap:"10px",alignItems:"center"},children:[e.jsx(ls,{}),e.jsx("span",{children:"Triggers"})]}),sx:{padding:0,minWidth:0},children:e.jsx(Lo,{dbs:t,tbl:s})})]})]})));var ge=(t=>(t[t.MANAGE=0]="MANAGE",t[t.EXPLORE=1]="EXPLORE",t))(ge||{});const No=t=>{const s=A(r=>en(r,t));return g.debug("tablesSelected",s),s},Fo=t=>{const s=A(r=>tn(r,t));return g.debug("viewsSelected",s),s},Es=p.memo(({dbs:t,tbl:s,typ:r})=>{var l,c;g.debug(t,s,r);const n=H(),a=No(t),o=Fo(t),d=Yn("(max-width:900px)");return e.jsxs(y,{color:"primary",sx:{display:"grid",gridTemplateColumns:"calc(100% - 110px) auto",justifyContent:"space-between",alignItems:"center",gridGap:"20px","&:hover":{".pp-row-actions":{visibility:d?"hidden":"visible"}}},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"0",overflow:"hidden"},children:[e.jsx(y,{sx:{display:"grid",alignItems:"center"},children:e.jsx(xe,{checked:o.includes(s)||a.includes(s),onClick:x=>{r===W.VIEW?n(sn({dbs:t,vws:s,isSelected:!o.includes(s)})):n(nn({dbs:t,tbl:s,isSelected:!a.includes(s)})),x.stopPropagation()}})}),e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",alignItems:"stretch"},children:[e.jsx(y,{sx:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},children:s}),e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto auto auto",gridGap:"10px",marginLeft:"10px",alignItems:"center",visibility:"hidden"},className:"pp-row-actions",children:[e.jsx(y,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Manage table `"+s+"`",placement:"bottom",children:e.jsx(ye,{underline:"none",onClick:x=>{n(Je({dbs:t,tbl:s,typ:r,explorerAction:ge.MANAGE})),x.preventDefault(),x.stopPropagation()},children:"Manage"})}),e.jsx(y,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(je,{title:"Explore table `"+s+"`",placement:"bottom",children:e.jsx(ye,{underline:"none",onClick:x=>{n(Je({dbs:t,tbl:s,typ:r,explorerAction:ge.EXPLORE})),x.preventDefault(),x.stopPropagation()},children:"Explore"})})]})]})]}),e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"space-evenly",alignItems:"center",paddingRight:"16px"},children:[e.jsx(je,{title:"Manage table `"+s+"`",placement:"bottom",children:e.jsx(le,{sx:{color:(l=ce)==null?void 0:l.palette.primary.main},onClick:x=>{n(Je({dbs:t,tbl:s,typ:r,explorerAction:ge.MANAGE})),x.preventDefault(),x.stopPropagation()},children:e.jsx(Qn,{})})}),e.jsx(je,{title:"Explore table `"+s+"`",placement:"bottom",children:e.jsx(le,{sx:{color:(c=ce)==null?void 0:c.palette.primary.main},onClick:x=>{n(Je({dbs:t,tbl:s,typ:r,explorerAction:ge.EXPLORE})),x.preventDefault(),x.stopPropagation()},children:e.jsx(Zn,{})})})]})]})}),Vo=p.lazy(()=>oe(()=>import("./Alert-1.0.6-728945e9.js"),["./Alert-1.0.6-728945e9.js","./main-1.0.6.js","./index.esm-1.0.6-f58f385b.js","./iconBase-1.0.6-b8af29f5.js","./AlertTitle-1.0.6-986ff958.js","./Close-1.0.6-4b5eac8d.js","./useSlot-1.0.6-8db722c4.js"],import.meta.url)),zo=p.memo(({dbs:t,search:s})=>{const r=H();g.debug(t,s);const n=A(l=>rn(l,t));g.debug(n);const a=A(l=>on(l,t));g.debug(a);const[o,d]=p.useState("");return p.useEffect(()=>{n||Vn(t,function(l){const c=l==null?void 0:l.data;g.debug("response data",c),r(an({dbs:t,tbl:c}))},l=>{g.error("error",l),d(l??F.contactSupport)})},[n]),o!==""?e.jsx(p.Suspense,{children:e.jsx(Vo,{severity:"error",message:o,close:!1})}):n?n&&a.length===0?e.jsx(y,{sx:{padding:"1rem"},children:e.jsx(Se,{children:"Database contains no tables"})}):e.jsxs(Ue,{"aria-label":"Tables",slots:{expandIcon:te,collapseIcon:$e},sx:{display:"grid",gap:"0",overflow:"hidden"},children:[...a.map(l=>{const c=!We(l,s);return e.jsx(ee,{itemId:l,label:e.jsx(Es,{dbs:t,tbl:l,typ:W.TABLE}),sx:{visibility:c?"hidden":"inherit",position:c?"fixed !important":"inherit"},children:e.jsx(ws,{dbs:t,tbl:l,typ:W.TABLE})})})]}):e.jsx(ue,{})}),Bo=p.lazy(()=>oe(()=>import("./Alert-1.0.6-728945e9.js"),["./Alert-1.0.6-728945e9.js","./main-1.0.6.js","./index.esm-1.0.6-f58f385b.js","./iconBase-1.0.6-b8af29f5.js","./AlertTitle-1.0.6-986ff958.js","./Close-1.0.6-4b5eac8d.js","./useSlot-1.0.6-8db722c4.js"],import.meta.url)),Ko=({dbs:t,search:s})=>{const r=H();g.debug(t,s);const n=A(c=>ln(c,t));g.debug(n);const[a,o]=p.useState("");p.useEffect(()=>{n||l()},[n]);const d=A(c=>cn(c,t));g.debug(d);const l=()=>{zn(t,c=>{const x=c==null?void 0:c.data;g.debug("response data",x),r(dn({dbs:t,vws:x}))},c=>{g.error("error",c),o(c??F.contactSupport)})};return a!==""?e.jsx(p.Suspense,{children:e.jsx(Bo,{severity:"error",message:a,close:!1})}):n?n&&d.length===0?e.jsx(y,{sx:{padding:"1rem"},children:e.jsx(Se,{children:"Database contains no views"})}):e.jsxs(Ue,{"aria-label":"Views",slots:{expandIcon:te,collapseIcon:$e},sx:{display:"grid",gap:"0",overflow:"hidden"},children:[...d.map(c=>{const x=!We(c,s);return e.jsx(ee,{itemId:c,label:e.jsx(Es,{dbs:t,tbl:c,typ:W.VIEW}),sx:{visibility:x?"hidden":"unset",position:x?"fixed !important":"inherit"},children:e.jsx(ws,{dbs:t,tbl:c,typ:W.TABLE})})})]}):e.jsx(ue,{})},Wo=p.lazy(()=>oe(()=>import("./Alert-1.0.6-728945e9.js"),["./Alert-1.0.6-728945e9.js","./main-1.0.6.js","./index.esm-1.0.6-f58f385b.js","./iconBase-1.0.6-b8af29f5.js","./AlertTitle-1.0.6-986ff958.js","./Close-1.0.6-4b5eac8d.js","./useSlot-1.0.6-8db722c4.js"],import.meta.url)),$o=({dbs:t,search:s})=>{g.debug(t,s);const r=H(),n=A(u=>un(u,t));g.debug(n);const a=A(u=>pn(u,t));g.debug(a);const[o,d]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{Bn(t,u=>{const i=u==null?void 0:u.data;g.debug("response data",i),r(xn({dbs:t,prc:i}))},u=>{g.error("error",u),d(u??F.contactSupport)})},c=p.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:u})=>e.jsx("pre",{style:{padding:0,margin:0},children:u.getValue()})}],[]),x=ke({..._e,columns:c,data:a.filter(u=>We(u.routine_name,s)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return g.debug(x),o!==""?e.jsx(p.Suspense,{children:e.jsx(Wo,{severity:"error",message:o,close:!1})}):n?n&&a.length===0?e.jsx(Re,{msg:"Database contains no stored procedures"}):e.jsx(Pe,{table:x}):e.jsx(ue,{})},Go=p.lazy(()=>oe(()=>import("./Alert-1.0.6-728945e9.js"),["./Alert-1.0.6-728945e9.js","./main-1.0.6.js","./index.esm-1.0.6-f58f385b.js","./iconBase-1.0.6-b8af29f5.js","./AlertTitle-1.0.6-986ff958.js","./Close-1.0.6-4b5eac8d.js","./useSlot-1.0.6-8db722c4.js"],import.meta.url)),Uo=({dbs:t,search:s})=>{g.debug(t,s);const r=H(),n=A(u=>gn(u,t));g.debug(n);const a=A(u=>mn(u,t));g.debug(a);const[o,d]=p.useState("");p.useEffect(()=>{n||l()},[n]);const l=()=>{Kn(t,u=>{const i=u==null?void 0:u.data;g.debug("response data",i),r(hn({dbs:t,fnc:i}))},u=>{g.error("error",u),d(u??F.contactSupport)})},c=p.useMemo(()=>[{accessorKey:"routine_name",header:"Name",size:100},{accessorKey:"routine_definition",header:"Body",size:300,Cell:({cell:u})=>e.jsx("pre",{style:{padding:0,margin:0},children:u.getValue()})}],[]),x=ke({..._e,columns:c,data:a.filter(u=>We(u.routine_name,s)),initialState:{density:"comfortable"},muiTableProps:{className:"pp-explorer-table"}});return g.debug(x),o!==""?e.jsx(p.Suspense,{children:e.jsx(Go,{severity:"error",message:o,close:!1})}):n?n&&a.length===0?e.jsx(Re,{msg:"Database contains no functions"}):e.jsx(Pe,{table:x}):e.jsx(ue,{})};var U=(t=>(t.WP="wp",t.LOCAL="local",t.REMOTE="remote",t.SYSTEM="system",t))(U||{});const Ho=({setShowFilter:t})=>{const s=H(),r=A(a=>Gt(a));g.debug(r);const n=A(a=>kt(a));return g.debug(n),p.useEffect(()=>{localStorage.setItem("ppExplorerSearchDbsTypes",JSON.stringify(r))},[r]),e.jsxs(Tt,{sx:{position:"absolute",top:"4em",right:"0",minWidth:"-webkit-fill-available",zIndex:9999999},children:[e.jsx(kr,{title:"Database filter",sx:{textAlign:"center"}}),e.jsx(St,{sx:{textAlign:"center",padding:"0 1em 1em 0"},children:e.jsxs(y,{sx:{display:"inline-grid",textAlign:"left","& label":{display:"flex",alignItems:"center"}},children:[e.jsx(q,{children:e.jsxs(Z,{children:[e.jsx(xe,{checked:r.includes(U.WP),onChange:(a,o)=>{s(o?Ye({dbsType:U.WP}):Qe({dbsType:U.WP}))}}),"WordPress database"]})}),e.jsx(q,{children:e.jsxs(Z,{children:[e.jsx(xe,{checked:r.includes(U.LOCAL),onChange:(a,o)=>{s(o?Ye({dbsType:U.LOCAL}):Qe({dbsType:U.LOCAL}))}}),"Local databases"]})}),e.jsx(q,{children:e.jsxs(Z,{children:[e.jsx(xe,{checked:r.includes(U.REMOTE),onChange:(a,o)=>{s(o?Ye({dbsType:U.REMOTE}):Qe({dbsType:U.REMOTE}))}}),"Remote databases"]})}),e.jsx(q,{children:e.jsxs(Z,{children:[e.jsx(xe,{checked:r.includes(U.SYSTEM),onChange:(a,o)=>{s(o?Ye({dbsType:U.SYSTEM}):Qe({dbsType:U.SYSTEM}))}}),"System databases"]})})]})}),e.jsxs(_r,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[e.jsx(y,{}),e.jsx($,{variant:"contained",onClick:()=>t(!1),children:"OK"})]})]})},De=({search:t,setSearch:s,addFilter:r})=>{g.debug(t,r);const[n,a]=p.useState(!1);return e.jsxs(y,{sx:{position:"relative",marginRight:r?0:"20px"},children:[e.jsx(re,{value:t,type:"search",onChange:o=>{s(o.target.value)},onClick:o=>{o.stopPropagation()},sx:{backgroundColor:"#fff",fontSize:"1em",margin:0,padding:0,borderRadius:"4px","&.MuiFormControl-root.MuiTextField-root .MuiInputBase-root":{paddingRight:0},"&.MuiFormControl-root.MuiTextField-root input":{padding:"8px"}},InputProps:{startAdornment:e.jsx(Vt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(er,{})}),endAdornment:e.jsx(e.Fragment,{children:r&&e.jsx(Vt,{position:"end",sx:{fontSize:"1.5rem",padding:0,margin:0},children:e.jsx(le,{onClick:()=>{a(!n)},children:e.jsx(tr,{})})})})}}),n&&e.jsx(Ho,{setShowFilter:a})]})},qo=(t,s)=>{const r=A(n=>fn(n,t,s));return g.debug("allTablesSelected",r),r},Xo=(t,s)=>{const r=A(n=>bn(n,t,s));return g.debug("allViewsSelected",r),r},Ne=t=>{const[s,r]=p.useState(localStorage.getItem(t)??""),n=a=>{r(a),localStorage.setItem(t,a)};return g.debug(s),{search:s,setSearch:n}},Jo=p.memo(({dbs:t})=>{g.debug(t);const s=H(),[r,n]=p.useState(!1),{search:a,setSearch:o}=Ne(`ppExplorerSearchTables-${t}`);g.debug(r,a);const[d,l]=p.useState(!1),{search:c,setSearch:x}=Ne(`ppExplorerSearchViews-${t}`);g.debug(d,c);const[u,i]=p.useState(!1),{search:h,setSearch:b}=Ne(`ppExplorerSearchProcedures-${t}`);g.debug(u,h);const[j,f]=p.useState(!1),{search:m,setSearch:T}=Ne(`ppExplorerSearchFunctions-${t}`);g.debug(j,m);const v=qo(t,a),C=Xo(t,c),[S,w]=p.useState("");return g.debug(S),e.jsxs(Ue,{className:"pp-data-exporer-table-tree","aria-label":"Databases",slots:{expandIcon:te,collapseIcon:$e},sx:{display:"grid",gap:"0"},children:[e.jsx(ee,{itemId:"tables",className:"pp-data-exporer-table-tree-item "+S,onClickCapture:P=>{var N,z;!(P.target instanceof HTMLInputElement)&&!(P.target instanceof HTMLAnchorElement)&&!((N=P.target.closest("span"))!=null&&N.classList.contains("pp-select-all-tables"))&&((z=P.target.closest("li"))!=null&&z.classList.contains("pp-data-exporer-table-tree-item"))&&(w(S===""?"hide-details":""),r?P.stopPropagation():(n(!0),w("")))},sx:{padding:0,minWidth:0,"&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[r&&S===""?e.jsx(xe,{className:"pp-select-all-tables",checked:v,onClick:P=>{s(Ut({dbs:t,isSelected:!v,search:a})),P.stopPropagation()},sx:{marginLeft:"-13px"}}):e.jsx(cs,{}),"Tables"]}),e.jsxs(y,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(y,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:P=>{s(Ve({dbs:t})),P.preventDefault(),P.stopPropagation()},children:"Refresh"})]})]}),e.jsx(y,{children:r&&S===""&&e.jsx(De,{search:a,setSearch:o})})]}),children:e.jsx(zo,{dbs:t,search:a})}),e.jsx(ee,{itemId:"view",onClick:()=>{l(!d)},label:e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[d?e.jsx(xe,{checked:C,onClick:P=>{s(Ht({dbs:t,isSelected:!C,search:c})),P.stopPropagation()},sx:{marginLeft:"-13px"}}):e.jsx(ds,{}),"Views"]}),e.jsxs(y,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(y,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:P=>{s(rt({dbs:t})),P.preventDefault(),P.stopPropagation()},children:"Refresh"})]})]}),e.jsx(y,{children:d&&e.jsx(De,{search:c,setSearch:x})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Ko,{dbs:t,search:c})}),e.jsx(ee,{itemId:"procedures",onClick:()=>{i(!u)},label:e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(ls,{}),"Stored Procedures"]}),e.jsxs(y,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(y,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:P=>{s(jn({dbs:t})),P.preventDefault(),P.stopPropagation()},children:"Refresh"})]})]}),e.jsx(y,{children:u&&e.jsx(De,{search:h,setSearch:b})})]}),sx:{padding:0,minWidth:0},children:e.jsx($o,{dbs:t,search:h})}),e.jsx(ee,{itemId:"functions",onClick:()=>{f(!j)},label:e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"20px",justifyContent:"space-between",alignItems:"center","&:hover":{".pp-row-actions":{display:"grid"}}},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"10px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(xr,{}),"Functions"]}),e.jsxs(y,{className:"pp-row-actions",sx:{display:"none",gridTemplateColumns:"auto auto",gridGap:"10px",alignItems:"center"},children:[e.jsx(y,{sx:{borderLeft:"1px solid black",height:"100%"}}),e.jsx(ye,{underline:"none",onClick:P=>{s(yn({dbs:t})),P.preventDefault(),P.stopPropagation()},children:"Refresh"})]})]}),e.jsx(y,{children:j&&e.jsx(De,{search:m,setSearch:T})})]}),sx:{padding:0,minWidth:0},children:e.jsx(Uo,{dbs:t,search:m})})]})}),Yo=()=>{const t=A(s=>In(s));return g.debug("countSelectedTables",t),t},Qo=()=>{const t=A(s=>Tn(s));return g.debug("hasBulkActions",t),t},Zo=()=>{const t=A(s=>Sn(s));return g.debug("countSelectedViews",t),t};function ea(t){return e.jsx(fr,{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:e.jsx(It,{...t})})}const Et=t=>{const{title:s,message:r,open:n,setOpen:a,onConfirm:o}=t;return e.jsxs(Cr,{open:n,onClose:()=>a(!1),PaperComponent:ea,"aria-labelledby":"confirm-dialog",children:[e.jsx(mr,{style:{marginTop:"10px",cursor:"move"},id:"draggable-dialog-title",children:s}),e.jsx(vr,{children:e.jsx(hr,{component:"div",children:r})}),e.jsx(wr,{sx:{marginRight:"15px",marginBottom:"15px"},children:e.jsx($,{variant:"contained",onClick:()=>{a(!1),o!==void 0&&o()},children:"OK"})})]})},ks=()=>{const t=A(s=>Cn(s));return g.debug("context",t),t},ta=(t,s,r,n,a,o=!1)=>{g.debug(t,s,r),Ge(Ee.appUrlActionRename,{dbs:t,from_tbl:s,to_tbl:r},n,a,o)},sa=(t,s,r,n,a,o,d,l=!1)=>{g.debug(t,s,r,n,a),Ge(Ee.appUrlActionCopy,{from_dbs:t,to_dbs:s,from_tbl:r,to_tbl:n,copy_data:a},o,d,l)},Ps=(t,s,r,n,a=!1)=>{g.debug(t,s),Ge(Ee.appUrlActionTruncate,{dbs:t,tbl:s},r,n,a)},_s=(t,s,r,n,a,o=!1)=>{g.debug(t,s,r),Ge(Ee.appUrlActionDrop,{dbs:t,tbl:s,typ:r},n,a,o)},na=(t,s,r,n,a=!1)=>{g.debug(t);const o=new FormData;o.append("dbs",t),Object.keys(s).map(d=>{o.append("file"+d,s[d])}),Ge(Ee.appUrlActionImport,o,r,n,a)},Le={export:"Export table(s)",truncate:"Truncate table(s)",drop:"Drop table(s)/view(s)"},ra=()=>{const t=H(),s=Qo(),r=Yo(),n=Zo(),a=ks(),[o,d]=p.useState({}),[l,c]=p.useState("*"),[x,u]=p.useState(null),[i,h]=p.useState(!1),[b,j]=p.useState(!1),[f,m]=p.useState(!1);p.useEffect(()=>{r===0&&(l==="export"||l==="truncate")&&c("*")},[r]);const T={vertical:"top",horizontal:"right"},v=()=>{const E=qt(yt.getState()),k={};return E==null?{}:(Object.keys(E).map(_=>{E[_].tablesSelected.map(M=>{k[_]===void 0&&(k[_]={}),k[_][M]={status:null,typ:W.TABLE}}),l==="drop"&&E[_].viewsSelected.map(M=>{k[_]===void 0&&(k[_]={}),k[_][M]={status:null,typ:W.VIEW}})}),k)},C=(E,k,_)=>{const M={...o};k==="*"?Object.keys(M[E]).map(O=>M[E][O].status=_):M[E][k].status=_,d(M)},S=()=>{Object.keys(o).length>0&&Object.keys(o).map(E=>{window.document.getElementById(`pp-export-tables-${E}`).submit(),C(E,"*",!0)})},w=()=>{Object.keys(o).length>0&&Object.keys(o).map(E=>{Object.keys(o[E]).map(k=>{Ps(E,k,_=>{g.debug(_),(_==null?void 0:_.code)==="ok"&&(_==null?void 0:_.message)!==void 0?C(E,k,!0):C(E,k,!1)},_=>{g.error("error",E,k,_),C(E,k,!1)})})})},P=()=>{Object.keys(o).length>0&&Object.keys(o).map(E=>{Object.keys(o[E]).map(k=>{_s(E,k,o[E][k].typ,_=>{g.debug(_),(_==null?void 0:_.code)==="ok"&&(_==null?void 0:_.message)!==void 0?C(E,k,!0):C(E,k,!1)},_=>{g.error("error",_),C(E,k,!1)})})})},N=E=>e.jsxs(os,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(as,{children:e.jsxs(at,{children:[e.jsx(Q,{children:"Database"}),e.jsx(Q,{children:"Table | View"}),e.jsx(Q,{children:"Status"})]})}),e.jsx(is,{children:Object.keys(E).map(k=>Object.keys(E[k]).map((_,M)=>{var O,V;return e.jsxs(at,{children:[e.jsx(Q,{children:M===0?k:null}),e.jsx(Q,{children:_}),e.jsxs(Q,{children:[E[k][_]===null&&e.jsx(nr,{style:{display:"block",margin:"0 auto"}}),E[k][_].status===!0&&e.jsx(Jt,{color:(O=ce)==null?void 0:O.palette.success.main,style:{display:"block",margin:"0 auto"}}),E[k][_].status===!1&&e.jsx(Yt,{color:(V=ce)==null?void 0:V.palette.error.main,style:{display:"block",margin:"0 auto"}})]})]},M)}))})]}),z=()=>e.jsx(y,{children:N(o)}),R=()=>{const E=v();return d(E),e.jsxs(y,{children:[N(E),(l==="truncate"||l==="drop")&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{style:{marginTop:"20px"}}),e.jsx(y,{sx:{marginTop:"20px",marginBottom:"20px"},children:l==="drop"?e.jsx("span",{children:"Deletes views and tables with all data permanently."}):e.jsx("span",{children:"Deletes all data permanently."})}),e.jsx(y,{children:e.jsx("strong",{children:"This actions cannot be undone!"})}),e.jsxs(y,{children:["'",e.jsx("strong",{children:"NO"}),"' to stop, '",e.jsx("strong",{children:"YES"}),"' to continue."]}),e.jsxs(y,{sx:{marginTop:"20px",fontSize:"80%",display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",gap:"5px"},children:[e.jsx(sr,{}),e.jsxs("span",{children:["Does not ",l," WordPress tables"]})]})]})]})};return s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"pp-bulk-actions-container",color:"inherit",position:"relative",elevation:4,sx:{margin:"0 0 5px 0"},children:e.jsxs(dt,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between",alignItems:"center"},children:[e.jsx(q,{variant:"standard",sx:{minWidth:200},children:e.jsxs(Te,{value:l,onChange:E=>{c(E.target.value)},children:[e.jsx(K,{value:"*",children:"Bulk actions"}),e.jsx(K,{value:"export",disabled:r===0,children:Le.export}),e.jsx(K,{value:"truncate",disabled:r===0,children:Le.truncate}),e.jsx(K,{value:"drop",children:Le.drop})]})}),e.jsx($,{variant:"contained",onClick:()=>{l!=="*"?(u(R()),h(!0)):j(!0)},children:"Apply"})]}),e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",gap:"12px",justifyContent:"space-between"},children:[e.jsx(Ot,{badgeContent:r,color:"info",anchorOrigin:T,children:e.jsx(cs,{color:"action",size:20})}),e.jsx(Ot,{badgeContent:n,color:"info",anchorOrigin:T,children:e.jsx(ds,{color:"action",size:20})})]})]})}),l==="export"&&Object.keys(o).map(E=>e.jsxs("form",{id:"pp-export-tables-"+E,action:a.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:E}),Object.keys(o[E]).map(k=>e.jsx("input",{type:"hidden",name:"table_names[]",value:k},k)),e.jsx("input",{type:"hidden",name:"_wpnonce",value:a.wp.nonce.split("-")[0]})]},"pp-export-tables-"+E)),e.jsx(Et,{title:"Apply bulk action",message:"No bulk action selected",open:b,setOpen:j}),e.jsx(me,{title:Le[l],message:x,open:i,setOpen:h,onConfirm:()=>{switch(m(!0),l){case"export":S();break;case"truncate":w();break;case"drop":P()}}}),e.jsx(Et,{title:Le[l],message:z(),open:f,setOpen:m,onConfirm:()=>{Object.keys(o).map(E=>{t(Ve({dbs:E})),t(Ut({dbs:E,isSelected:!1,search:""})),t(rt({dbs:E})),t(Ht({dbs:E,isSelected:!1,search:""}))})}})]}):null},Mt=()=>{const t=A(s=>qt(s));return g.debug(t),t},oa=({setCanImport:t})=>{const s=ks(),r=Mt(),n=Object.keys(r).filter(R=>r[R].dbsType===U.WP)[0],a=p.useRef(null),[o,d]=p.useState(n??""),[l,c]=p.useState(""),[x,u]=p.useState(null),i=s.wp.zip?".sql,.zip":".zip",h=s.wp.zip?"SQL and ZIP":"SQL",b=s.wp.upload,[j,f]=p.useState(!1),[m,T]=p.useState(null),[v,C]=p.useState(!1),[S,w]=p.useState(""),[P,N]=p.useState(null),z=R=>e.jsx(e.Fragment,{children:e.jsxs(os,{sx:{"& th":{fontWeight:"bold",padding:"4px 6px"},"& td":{padding:"4px 6px",border:"none"}},children:[e.jsx(as,{children:e.jsxs(at,{children:[e.jsx(Q,{children:"Import file"}),e.jsx(Q,{children:"Message"}),e.jsx(Q,{children:"Status"})]})}),e.jsx(is,{children:R.map(E=>Object.keys(E).map(k=>{var _,M;return e.jsxs(at,{children:[e.jsx(Q,{children:k}),e.jsx(Q,{children:E[k].msg}),e.jsx(Q,{children:E[k].status==="error"?e.jsx(Yt,{color:(_=ce)==null?void 0:_.palette.error.main,style:{display:"block",margin:"0 auto"}}):e.jsx(Jt,{color:(M=ce)==null?void 0:M.palette.success.main,style:{display:"block",margin:"0 auto"}})})]},k)}))})]})});return e.jsxs(e.Fragment,{children:[e.jsxs(y,{className:"pp-import-container",sx:{position:"relative","& > .tooltip":{position:"absolute",top:"10px",right:"10px",zIndex:999}},children:[e.jsx(nt,{title:"Close",position:"bottom",children:e.jsx(le,{onClick:()=>{a.current&&(a.current.value=""),c(""),t(!1)},size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(Qt,{})})}),e.jsx(ct,{className:"pp-import-container",color:"inherit",position:"relative",elevation:4,sx:{display:"grid",alignItems:"center",margin:"0 0 5px 0"},children:e.jsxs(dt,{sx:{display:"grid",gap:"10px",alignItems:"center",height:"max-content",paddingTop:"50px",paddingBottom:"30px"},children:[e.jsx(e.Fragment,{children:e.jsxs(y,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"start",alignItems:"center",gap:"15px"},children:[e.jsx(y,{children:e.jsxs(q,{sx:{minWidth:"300px"},children:[e.jsx(it,{variant:"outlined",children:"Select destination database"}),e.jsx(Te,{label:"Select destination database",value:o,onChange:R=>{d(R.target.value)},children:Object.keys(r).map(R=>{const E=r[R].dbsType===U.WP?R+" (WordPress database)":R;return e.jsx(K,{value:R,children:E},R)})})]})}),e.jsx(y,{children:e.jsx("form",{children:e.jsxs($,{component:"label",variant:"outlined",startIcon:e.jsx(rr,{}),children:["Select file(s)",e.jsx(re,{type:"file",inputProps:{accept:i,multiple:!0},onChange:R=>{const E=R.target.files;u(E);const k=Object.keys(E).map(_=>E[_].name).toString();c(k)},InputProps:{inputRef:a},sx:{display:"none"}})]})})}),l!==""&&e.jsx(e.Fragment,{children:e.jsx(y,{children:e.jsx($,{component:"label",variant:"contained",startIcon:e.jsx(or,{}),onClick:()=>{T(e.jsxs(y,{children:[e.jsxs(y,{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["Selected file(s): ",e.jsx("strong",{children:l})]}),e.jsxs(y,{children:["Selected database: ",e.jsx("strong",{children:o})]}),e.jsxs(y,{sx:{marginTop:"20px",fontSize:"80%"},children:[e.jsx("strong",{children:"NOTE"})," You can work on other tasks while your import is performed in the background."]})]})),f(!0)},children:"Import file(s)"})})})]})}),l!==""&&e.jsxs(y,{sx:{marginTop:"20px",marginBottom:"10px",minWidth:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",fontWeight:"bold"},children:["Selected file(s): ",l]}),e.jsxs("fieldset",{className:"pp-fieldset",style:{marginTop:"5px",padding:"10px 30px",minWidth:0},children:[e.jsx("legend",{children:"IMPORTANT"}),e.jsxs("ul",{style:{paddingLeft:"15px"},children:[e.jsx("li",{children:"Supports multiple file uploads simultaneously."}),e.jsxs("li",{children:["Server supports ",h," file types."]}),e.jsxs("li",{children:["Maximum supported file size on this server is ",b,"."]}),e.jsx("li",{children:"Add a ; and a new line character at the end of every SQL statement."})]})]})]})})]}),e.jsx(me,{title:"Import selected file(s)?",message:m,open:j,setOpen:f,onConfirm:()=>{na(o,x,R=>{var E;if(R!=null&&R.message&&((E=R==null?void 0:R.context)!=null&&E.imported)&&Array.isArray(R.context.imported)){const k=R.context.imported;C(!0),w(R.message),N(z(k))}else L(F.contactSupport,{variant:"error"})},R=>{g.error("error",R),L(F.contactSupport,{variant:"error"})})}}),e.jsx(Et,{title:S,message:P,open:v,setOpen:C})]})};const $t=p.lazy(()=>oe(()=>import("./Alert-1.0.6-728945e9.js"),["./Alert-1.0.6-728945e9.js","./main-1.0.6.js","./index.esm-1.0.6-f58f385b.js","./iconBase-1.0.6-b8af29f5.js","./AlertTitle-1.0.6-986ff958.js","./Close-1.0.6-4b5eac8d.js","./useSlot-1.0.6-8db722c4.js"],import.meta.url)),aa=()=>{var f;const t=H(),{search:s,setSearch:r}=Ne("ppExplorerSearch"),n=Mt(),a=A(m=>vn(m));g.debug(a);const o=A(m=>Pt(m));g.debug(o);const d=A(m=>Gt(m));g.debug(d);const[l,c]=p.useState("");p.useEffect(()=>{window.ppActionEnableImport=(m=!0)=>{b(m)},x()},[]);const x=()=>{let m=[];const T=localStorage.getItem("ppExplorerSearchDbsTypes");T!=null&&T!==""?m=JSON.parse(T):m=[U.WP,U.LOCAL,U.REMOTE],Wn(v=>{const C=v==null?void 0:v.data;g.debug("response data",C);const S=[],w={};C.map(z=>{S.push({dbs:z.dbs,dbsType:z.dbs_type,pdsDbs:z.pds}),w[z.dbs]=!1}),i(w),S.sort((z,R)=>z.dbs.toLocaleLowerCase()>R.dbs.toLocaleLowerCase()?1:R.dbs.toLocaleLowerCase()>z.dbs.toLocaleLowerCase()?-1:0),g.debug(S),t(wn({dbs:S,dbsTypes:m}));const P={};C.map(z=>{P[z.dbs]=z.dbs_type}),t(En({dbs:P}));const N=v.context;g.debug("context",N),t(kn({context:N}))},v=>{g.error("error",v),c(v??F.contactSupport)})},[u,i]=p.useState({}),[h,b]=p.useState(!1),j=()=>e.jsx(je,{title:"Import data or execute scripts",children:e.jsx(le,{sx:{color:"inherit"},onClick:()=>{b(!h)},children:e.jsx(ar,{})})});return l!==""?e.jsx(p.Suspense,{children:e.jsx($t,{severity:"error",message:l,close:!1})}):e.jsxs(y,{className:"pp-sub-container-explorer",sx:{width:"100%"},children:[e.jsx(ct,{className:"pp-explorer-header",elevation:4,position:"relative",sx:{margin:"0 0 5px 0"},children:e.jsxs(dt,{sx:{display:"grid",gridTemplateColumns:"1fr auto",gap:"12px",justifyContent:"space-between",paddingRight:"12px !important"},children:[((f=Ee.appOrig)==null?void 0:f.appTarget)==="backend"?e.jsx(y,{sx:{textAlign:"right"},children:"Search & Filter"}):e.jsxs(y,{sx:{display:"inline-grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gridGap:"10px"},children:[e.jsx(y,{sx:{fontSize:"18px",lineHeight:"18px",fontWeight:"bold",whiteSpace:"nowrap"},children:"Data Explorer"}),e.jsx(y,{children:j()})]}),e.jsx(y,{children:e.jsx(De,{search:s,setSearch:r,addFilter:!0})})]})}),e.jsx(ra,{}),h&&e.jsx(oa,{setCanImport:b}),n==null?e.jsx(y,{sx:{padding:"30px"},children:e.jsx(_t,{title:"Loading..."})}):e.jsxs(e.Fragment,{children:[a!==""&&e.jsx(It,{sx:{marginBottom:"5px"},elevation:4,children:e.jsx(p.Suspense,{children:e.jsx($t,{severity:"error",message:a,close:!0,setClose:()=>{t(Xt({error:""}))}})})}),e.jsx(It,{className:"pp-data-exporer",elevation:4,children:e.jsx(Ue,{className:"pp-data-exporer-database-tree","aria-label":"Data Explorer",slots:{expandIcon:te,collapseIcon:$e},sx:{display:"grid",gridGap:"0",borderBottom:"1px solid rgba(0, 0, 0, 0.34)",borderRadius:"4px","& li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:"4px",borderTopRightRadius:"4px"},"& li.MuiTreeItem-root:first-of-type li.MuiTreeItem-root:first-of-type":{borderTopLeftRadius:0,borderTopRightRadius:0}},children:Object.keys(n).map(m=>{if(d.includes(o[m])===!1||s!==""&&!We(m,s))return null;const T=o[m].toLocaleLowerCase()==="wp"?m+" (WordPress database)":m;return e.jsx(ee,{itemId:m,className:"pp-data-exporer-database-tree-item hide-details",onClickCapture:v=>{var C,S,w,P;if((C=v.target.closest("li"))!=null&&C.classList.contains("pp-data-exporer-database-tree-item"))if((S=v.target.closest("li"))!=null&&S.classList.contains("hide-details")?(w=v.target.closest("li"))==null||w.classList.remove("hide-details"):(P=v.target.closest("li"))==null||P.classList.add("hide-details"),u[m])v.stopPropagation();else{const N=u;N[m]=!0,i(N)}},sx:{padding:"0","&.hide-details > ul":{visibility:"hidden",position:"fixed"}},label:e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"auto auto",justifyContent:"start",alignItems:"center",gap:"10px"},children:[e.jsx(ur,{}),T]}),children:e.jsx(Jo,{dbs:m})},m)})})})]})]})},ia=()=>{const t=A(s=>kt(s));return g.debug(t),e.jsx(e.Fragment,{children:t!==void 0&&t.action===ge.EXPLORE&&e.jsx(Rr,{appId:ir(),dbs:t.dbs,tbl:t.tbl,exploring:!0})})},la=({dbs:t,tbl:s})=>{g.debug(t,s);const[r,n]=p.useState(!1),[a,o]=p.useState(void 0),d=()=>{switch(a){case"form":return"Reset Form Builder?";case"theme":return"Reset Theme?";default:return"Reset Table Builder?"}};return e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{disableGutters:!0,children:[e.jsx(ve,{expandIcon:e.jsx(te,{}),children:"Reset"}),e.jsx(we,{children:e.jsxs(q,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx($,{variant:"contained",color:"primary",onClick:()=>{o(jt.TABLE),n(!0)},children:"Reset Table Builder"}),e.jsx($,{variant:"contained",color:"primary",onClick:()=>{o(jt.FORM),n(!0)},children:"Reset Form Builder"}),e.jsx($,{variant:"contained",color:"primary",onClick:()=>{o(jt.THEME),n(!0)},children:"Reset Theme"}),e.jsxs(he,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",alignItems:"center","& svg":{fontSize:"20px"}},children:[e.jsx(Zt,{}),"A reset cannot be undone!"]})]})})]}),e.jsx(me,{title:d(),message:"Are you sure? This action cannot be undone!",open:r,setOpen:n,onConfirm:()=>{a!==void 0&&br(Mr.GLOBAL,a,t,s,null,null,l=>{if(l!=null&&l.code&&(l==null?void 0:l.message)!==void 0)switch(l.code){case"ok":L(l.message,{variant:"success"});break;case"info":L(l.message,{variant:"info"});break;default:L(l.message??F.contactSupport,{variant:"error"})}else g.error(l),L(F.contactSupport,{variant:"error"})},l=>{g.error("error",l),L(l??F.contactSupport,{variant:"error"})})}})]})},ca=({dbs:t,tbl:s,setIsUpdated:r})=>{g.debug(t,s);const n=H(),a=A(d=>Ie(d));g.debug(a);const o=d=>{const l={...a,table_settings:{...a.table_settings,hyperlink_definition:d}};n(st({settings:l})),r(!0)};return e.jsxs(Ce,{disableGutters:!0,children:[e.jsx(ve,{expandIcon:e.jsx(te,{}),children:"Table Settings"}),e.jsx(we,{children:e.jsxs(q,{children:[e.jsx(Z,{children:"Process hyperlink columns as"}),e.jsxs(ps,{sx:{marginTop:"10px",marginBottom:"10px"},children:[e.jsxs(Z,{className:"align-label-radio",children:[e.jsx(lt,{checked:a.table_settings.hyperlink_definition==="json",onChange:d=>{o("json"),d.stopPropagation()}}),"Preformatted JSON"]}),e.jsxs(Z,{children:[e.jsx(lt,{checked:a.table_settings.hyperlink_definition==="text",onChange:d=>{o("text"),d.stopPropagation()}}),"Plain text"]})]}),e.jsx(he,{children:"Preformatted JSON supports individual label and target settings. Plain text converts column content to a hyperlink link."})]})})]})},da=({dbs:t,tbl:s,setIsUpdated:r})=>{var i;g.debug(t,s);const n=H(),a=A(h=>Pn(h));g.debug(a);const o=A(h=>Ie(h));g.debug(o);const[d,l]=p.useState(""),c=(h,b)=>{const j={...o,list_labels:{...o.list_labels,[h]:b}};n(st({settings:j})),r(!0)},x=(h,b)=>{const j={...o,form_labels:{...o.form_labels,[h]:b}};n(st({settings:j})),r(!0)},u=(h,b)=>{const j={...o,column_media:{...o.column_media,[h]:b}};n(st({settings:j})),r(!0)};return e.jsxs(Ce,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(ve,{expandIcon:e.jsx(te,{}),children:"Column Settings"}),e.jsx(we,{children:e.jsxs(q,{fullWidth:!0,children:[e.jsx(y,{sx:{display:"grid",gridGap:"10px",marginBottom:"20px"},children:e.jsxs(y,{children:[...(i=a==null?void 0:a.columns)==null?void 0:i.map((h,b)=>{const j=h.column_name;return e.jsxs(Ce,{expanded:d===j,onChange:()=>{l(d===j?"":j)},sx:{"&.MuiPaper-root.MuiPaper-elevation.Mui-expanded":{margin:0}},children:[e.jsx(ve,{expandIcon:e.jsx(te,{}),children:h.column_name}),e.jsxs(we,{sx:{display:"grid",gridGap:"10px"},children:[e.jsx(re,{label:"Table label",value:o.list_labels[j],variant:"outlined",onChange:f=>{c(j,f.target.value)}}),e.jsx(re,{label:"Form label",value:o.form_labels[j],variant:"outlined",onChange:f=>{x(j,f.target.value)}}),e.jsxs(q,{children:[e.jsx(it,{id:"media_type_label"+b,variant:"outlined",children:"Media type"}),e.jsxs(Te,{labelId:"media_type_label"+b,id:"media_type"+b,label:"Media type",value:o.column_media[j]??"",variant:"outlined",onChange:f=>{u(j,f.target.value),f.stopPropagation()},children:[e.jsx(K,{value:"",children:""},""),e.jsx(K,{value:"Attachment",children:"Attachment"},"Attachment"),e.jsx(K,{value:"Audio",children:"Audio"},"Audio"),e.jsx(K,{value:"Hyperlink",children:"Hyperlink"},"Hyperlink"),e.jsx(K,{value:"Image",children:"Image"},"Image"),e.jsx(K,{value:"ImageURL",children:"ImageURL"},"ImageURL"),e.jsx(K,{value:"Video",children:"Video"},"Video")]})]})]})]})})]})}),e.jsx(he,{children:"Default column labels and column media types"})]})})]})};var X=(t=>(t.SELECT="select",t.INSERT="insert",t.UPDATE="update",t.DELETE="delete",t))(X||{}),Fe=(t=>(t.GET="GET",t.POST="POST",t))(Fe||{});const tt=({restApi:t,action:s,roles:r,users:n,setRestApi:a,expanded:o,setExpanded:d})=>{g.debug(t,s,r,n,o);const l=(b,j)=>{const f=Ar(t);if(j)f.methods.push(b);else{const m=f.methods.indexOf(b);m>-1&&f.methods.splice(m,1)}g.debug(b,j,f),a(f)},c=b=>{g.debug(b),a({...t,authorization:b})},x=b=>{g.debug(b),a({...t,authorized_roles:b.map(j=>j.key)})},u=b=>{g.debug(b),a({...t,authorized_users:b.map(j=>j.key)})},i=p.useMemo(()=>r.filter(b=>t.authorized_roles.includes(b.key)),[t.authorized_roles,r]),h=p.useMemo(()=>n.filter(b=>t.authorized_users.includes(b.key)),[t.authorized_users,n]);return e.jsxs(Ce,{disableGutters:!0,expanded:o===s.toString(),onChange:()=>{o===s.toString()?d(""):d(s)},children:[e.jsx(ve,{expandIcon:e.jsx(te,{}),sx:{textTransform:"capitalize"},children:s}),e.jsx(we,{children:e.jsxs(y,{sx:{display:"grid",gridGap:"20px"},children:[e.jsx(Z,{children:"Supported HTTP methods"}),e.jsxs(y,{children:[e.jsx(Ke,{control:e.jsx(Be,{checked:t.methods.includes(Fe.GET),onChange:(b,j)=>{l(Fe.GET,j),b.stopPropagation()}}),label:"GET",labelPlacement:"end"}),e.jsx(Ke,{control:e.jsx(Be,{checked:t.methods.includes(Fe.POST),onChange:(b,j)=>{l(Fe.POST,j),b.stopPropagation()}}),label:"POST",labelPlacement:"end"})]}),e.jsx(Z,{children:"Authorization"}),e.jsxs(q,{sx:{marginLeft:"-10px"},children:[e.jsxs(ps,{children:[e.jsxs(Z,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(lt,{checked:t.authorization===Ae.AUTHORIZED,onChange:b=>{c(Ae.AUTHORIZED),b.stopPropagation()}}),"Authorized access only"]}),e.jsxs(y,{sx:{display:"grid",gridGap:"10px",margin:"20px 10px 20px 42px"},children:[e.jsx(Ft,{multiple:!0,options:r,getOptionLabel:b=>b.value,value:i,onChange:(b,j)=>{x(j)},renderInput:b=>e.jsx(re,{...b,label:"Roles"})}),e.jsx(Ft,{multiple:!0,options:n,getOptionLabel:b=>b.value,value:h,onChange:(b,j)=>{u(j)},renderInput:b=>e.jsx(re,{...b,label:"Users"})})]}),e.jsxs(Z,{className:"align-label-radio",sx:{cursor:"pointer"},children:[e.jsx(lt,{checked:t.authorization===Ae.ANONYMOUS,onChange:b=>{c(Ae.ANONYMOUS),b.stopPropagation()}}),"Anonymous access"]})]}),t.authorization===Ae.ANONYMOUS&&t.methods.length>0&&e.jsxs(y,{sx:{marginTop:"10px",marginLeft:"10px"},children:[(s===X.INSERT||s===X.UPDATE||s===X.DELETE)&&e.jsx(he,{children:"This setting allows non-authorized users to modify this table"}),s===X.SELECT&&e.jsx(he,{children:"This setting allows non-authorized users to query this table"})]})]})]})})]})},ua=({dbs:t,tbl:s,typ:r,metaData:n,setIsUpdated:a})=>{var h,b,j,f;g.debug(t,s,r,n);const o=H(),d=A(m=>Ie(m));g.debug(d);const l=A(m=>Pt(m));g.debug(l);const[c,x]=p.useState(""),u=[];if(((b=(h=n==null?void 0:n.settings)==null?void 0:h.wp)==null?void 0:b.roles)!==void 0)for(const m in n.settings.wp.roles)u.push({key:m,value:n.settings.wp.roles[m]});g.debug(u);const i=[];if(((f=(j=n==null?void 0:n.settings)==null?void 0:j.wp)==null?void 0:f.users)!==void 0)for(const m in n.settings.wp.users)i.push({key:m,value:n.settings.wp.users[m]});return g.debug(i),e.jsxs(Ce,{disableGutters:!0,slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(ve,{expandIcon:e.jsx(te,{}),children:"REST API"}),e.jsx(we,{children:e.jsxs(y,{children:[e.jsx(Ke,{control:e.jsx(Be,{checked:d.rest_api!==null,onClick:m=>{d.rest_api!==null?o(_n({})):o(Rn({})),a(!0),m.stopPropagation()}}),label:"Enable REST API",labelPlacement:"end"}),d.rest_api!==null&&e.jsxs(y,{sx:{marginTop:"20px"},children:[e.jsx(tt,{restApi:d.rest_api.select,action:X.SELECT,roles:u,users:i,setRestApi:m=>{const T={...d.rest_api};T[X.SELECT]=m,o(Ze({rest_api:T})),a(!0)},expanded:c,setExpanded:x}),e.jsx(tt,{restApi:d.rest_api.insert,action:X.INSERT,roles:u,users:i,setRestApi:m=>{const T={...d.rest_api};T[X.INSERT]=m,o(Ze({rest_api:T})),a(!0)},expanded:c,setExpanded:x}),e.jsx(tt,{restApi:d.rest_api.update,action:X.UPDATE,roles:u,users:i,setRestApi:m=>{const T={...d.rest_api};T[X.UPDATE]=m,o(Ze({rest_api:T})),a(!0)},expanded:c,setExpanded:x}),e.jsx(tt,{restApi:d.rest_api.delete,action:X.DELETE,roles:u,users:i,setRestApi:m=>{const T={...d.rest_api};T[X.DELETE]=m,o(Ze({rest_api:T})),a(!0)},expanded:c,setExpanded:x})]}),l[t]==="system"||l[t]==="wp"&&n.settings.wp.tables.includes(s)&&e.jsxs(he,{sx:{display:"inline-grid",gridTemplateColumns:"20px auto",gridGap:"5px",marginTop:"20px",alignItems:"center","& svg":{fontSize:"20px"}},children:[e.jsx(Zt,{}),"We discourage enabling REST API services for WordPress and system tables"]})]})})]})},pa=({dbs:t,tbl:s,typ:r,metaData:n})=>{var G,se,J,Me,He,fe,qe,Xe;g.debug(t,s,r,n);const a=H(),[o,d]=p.useState("sql"),[l,c]=p.useState(!0),[x,u]=p.useState(""),[i,h]=p.useState(t),[b,j]=p.useState(""),[f,m]=p.useState(!0),[T,v]=p.useState(!1),[C,S]=p.useState(!1),[w,P]=p.useState(!1),[N,z]=p.useState(!1),R=Mt();g.debug(R);const E=p.useMemo(()=>{const I=[];for(const Y in R)I.push(Y);return I},[R]);g.debug(E);const k=A(I=>Pt(I));g.debug(k);const[_,M]=p.useState(R[t].pdsDbs===!0?((J=(se=(G=n==null?void 0:n.settings)==null?void 0:G.wp)==null?void 0:se.connect)==null?void 0:J.interval)??"":""),[O,V]=p.useState(R[t].pdsDbs===!0?((fe=(He=(Me=n==null?void 0:n.settings)==null?void 0:Me.wp)==null?void 0:He.connect)==null?void 0:fe.unit)??"":""),ae=I=>{lr.post(n.settings.wp.homea+"?action=wpda_pds_update_interval",I,{headers:{"Content-Type":"multipart/form-data"}}).then(Y=>{g.error(I,Y)}).catch(Y=>{g.error("error",Y)})};return e.jsxs(e.Fragment,{children:[e.jsxs(y,{sx:{margin:0,padding:0,"& .pp-action":{display:"grid",gridTemplateColumns:"150px 1fr",alignItems:"center",margin:0,padding:"30px",borderBottom:"1px solid #ddd"},"& .pp-action button":{width:"120px"}},children:[r===W.TABLE&&e.jsxs(y,{className:"pp-action",children:[e.jsx(y,{children:e.jsxs("form",{action:n.settings.wp.home+"?action=wpda_export",method:"post",target:"_blank",children:[e.jsx("input",{type:"hidden",name:"type",value:"table"}),e.jsx("input",{type:"hidden",name:"wpdaschema_name",value:t}),e.jsx("input",{type:"hidden",name:"table_names",value:s}),e.jsx("input",{type:"hidden",name:"format_type",value:o}),e.jsx("input",{type:"hidden",name:"include_table_settings",value:o==="sql"&&l?"on":"off"}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.aonce.split("-")[0]}),e.jsx($,{variant:"contained",type:"submit",children:"Export"})]})}),e.jsxs(y,{sx:{display:"grid"},children:[e.jsxs(q,{children:[e.jsx(it,{variant:"outlined",children:"Export to"}),e.jsxs(Te,{label:"Export to",value:o,onChange:I=>{d(I.target.value)},children:[e.jsx(K,{value:"sql",children:"SQL"},"sql"),e.jsx(K,{value:"csv",children:"CSV"},"csv"),e.jsx(K,{value:"json",children:"JSON"},"json"),e.jsx(K,{value:"excel",children:"Excel"},"excel"),e.jsx(K,{value:"xml",children:"XML"},"xml")]})]}),e.jsx(Ke,{sx:{visibility:o==="sql"?"visible":"hidden",height:o==="sql"?"auto":0,marginTop:o==="sql"?"10px":0,marginLeft:0},control:e.jsx(Be,{checked:l,onClick:I=>{c(!l),I.stopPropagation()}}),label:"With table settings",labelPlacement:"end"})]})]}),k[t]!=="system"&&(k[t]!=="wp"||!n.settings.wp.tables.includes(s))&&e.jsxs(y,{className:"pp-action",children:[e.jsx(y,{children:e.jsx($,{variant:"contained",onClick:()=>{s!==x&&x.trim()!==""?v(!0):L("Nothing to rename",{variant:"error"})},children:"Rename"})}),e.jsx(y,{children:e.jsx(re,{label:r===W.TABLE?"New table name":"New view name",value:x,onChange:I=>{u(I.target.value)},fullWidth:!0})})]}),r===W.TABLE&&e.jsxs(y,{className:"pp-action",children:[e.jsxs(y,{children:[e.jsx($,{variant:"contained",onClick:()=>{b.trim()!==""?(z(!0),sa(t,i,s,b,f,I=>{if(g.debug(I),I!=null&&I.code&&(I==null?void 0:I.message)!==void 0)switch(I.code){case"ok":a(Ve({dbs:t})),L(I.message,{variant:"success"});break;case"info":L(I.message,{variant:"info"});break;default:g.error(I),L(I.message??F.contactSupport,{variant:"error"})}else g.error(I),L(F.contactSupport,{variant:"error"});z(!1)},I=>{g.error("error",I),L(I??F.contactSupport,{variant:"error"}),z(!1)})):L("Nothing to rename",{variant:"error"})},children:"Copy"}),e.jsx(Ke,{control:e.jsx(Be,{checked:f,onClick:I=>{m(!f),I.stopPropagation()}}),label:"Copy data",labelPlacement:"end",sx:{height:"56px"}}),e.jsx(y,{sx:{display:N?"block":"none","& > div":{marginRight:"30px"},"& span.MuiCircularProgress-root, svg":{height:"20px !important",width:"20px !important"}},children:e.jsx(_t,{title:"Copying..."})})]}),e.jsxs(y,{sx:{display:"grid",gridGap:"10px"},children:[e.jsxs(q,{fullWidth:!0,children:[e.jsx(it,{variant:"outlined",children:"To database"}),e.jsxs(Te,{label:"To database",value:i,onChange:I=>{h(I.target.value)},children:[...E.map(I=>e.jsx(K,{value:I,children:I},I))]})]}),e.jsx(re,{label:"To table name",value:b,onChange:I=>{j(I.target.value)},fullWidth:!0})]})]}),r===W.TABLE&&k[t]!=="system"&&(k[t]!=="wp"||!n.settings.wp.tables.includes(s))&&e.jsxs(y,{className:"pp-action",children:[e.jsx(y,{children:e.jsx($,{variant:"contained",onClick:()=>{S(!0)},children:"Truncate"})}),e.jsxs(y,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx("span",{children:"Deletes all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),k[t]!=="system"&&(k[t]!=="wp"||!n.settings.wp.tables.includes(s))&&e.jsxs(y,{className:"pp-action",children:[e.jsx(y,{children:e.jsx($,{variant:"contained",onClick:()=>{P(!0)},children:"Drop"})}),e.jsxs(y,{sx:{display:"grid",gridGap:"5px"},children:[r==W.VIEW?e.jsx("span",{children:"Deletes view permanently."}):e.jsx("span",{children:"Deletes table and all data permanently."}),e.jsx("strong",{children:"This action cannot be undone!"})]})]}),r===W.TABLE&&e.jsxs(y,{className:"pp-action",children:[e.jsx(y,{children:e.jsxs("form",{method:"POST",action:n.settings.wp.home+"?page=wpda_designer",children:[e.jsx("input",{type:"hidden",name:"action",value:"edit"}),e.jsx("input",{type:"hidden",name:"action2",value:"init"}),e.jsx("input",{type:"hidden",name:"wpda_schema_name",value:t}),e.jsx("input",{type:"hidden",name:"wpda_schema_name_re",value:t}),e.jsx("input",{type:"hidden",name:"wpda_table_name",value:s}),e.jsx("input",{type:"hidden",name:"wpda_table_name_re",value:s}),e.jsx("input",{type:"hidden",name:"_wpnonce",value:n.settings.wp.alter}),e.jsx("input",{type:"hidden",name:"page_number",value:"1"}),e.jsx("input",{type:"hidden",name:"caller",value:"dataexplorer"}),e.jsx($,{variant:"contained",type:"submit",children:"ALTER"})]})}),e.jsx(y,{sx:{display:"grid",gridGap:"5px"},children:"Loads table into the Data Designer."})]}),R[t].pdsDbs===!0&&((Xe=(qe=n==null?void 0:n.settings)==null?void 0:qe.wp)==null?void 0:Xe.connect)!==!1&&e.jsxs(y,{className:"pp-action",children:[e.jsx(y,{children:e.jsx($,{variant:"contained",onClick:()=>{if(_!==""&&_>0&&O!==""){const I=new FormData;I.append("wpnonce",n.settings.wp.refresh),I.append("schema_name",t),I.append("table_name",s),I.append("interval",_.toString()),I.append("unit",O),ae(I)}else L("Please enter valid scheduled update values",{variant:"error"})},children:"Refresh"})}),e.jsxs(y,{sx:{display:"grid",gridGap:"5px"},children:[e.jsx(y,{children:"Next scheduled update"}),e.jsxs(y,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",justifyContent:"start",alignItems:"center",gap:"5px"},children:[e.jsx(re,{type:"number",inputProps:{min:0},value:_,autoComplete:"off",onChange:I=>{const Y=I.target.value.replaceAll("-","");M(Y===""?"":Number(Y))}}),e.jsxs(Te,{value:O,onChange:I=>{V(I.target.value)},children:[e.jsx(K,{value:""}),e.jsx(K,{value:"hour",children:"hour"}),e.jsx(K,{value:"day",children:"day"})]})]}),e.jsx(q,{children:e.jsx(he,{children:"Enter and press REFRESH to apply"})})]})]}),n.create!==""&&e.jsxs(y,{className:"pp-action",children:[e.jsx(y,{children:e.jsx(Pr,{text:n.create,onCopy:()=>{L("SQL was copied to your clipboard",{variant:"info"})},children:e.jsx(je,{title:"Copy SQL to clipboard",children:e.jsx($,{variant:"contained",endIcon:e.jsx(Lr,{}),sx:{display:"flex",alignItems:"flex-start","& svg":{width:"50%"}},children:"SQL"})})})}),e.jsx(y,{sx:{display:"grid",gridGap:"5px"},children:e.jsx(y,{sx:{whiteSpace:"pre-wrap",fontSize:"70%"},children:n.create})})]})]}),e.jsx(me,{title:`Rename ${r===W.VIEW?"view":"table"}?`,message:"This can affect existing apps using this table!",open:T,setOpen:v,onConfirm:()=>{ta(t,s,x,I=>{if(g.debug(I),I!=null&&I.code&&(I==null?void 0:I.message)!==void 0)switch(I.code){case"ok":r===W.VIEW?a(rt({dbs:t})):a(Ve({dbs:t})),a(ot({})),L(I.message,{variant:"success"});break;case"info":L(I.message,{variant:"info"});break;default:g.error(I),L(I.message??F.contactSupport,{variant:"error"})}else g.error(I),L(F.contactSupport,{variant:"error"})},I=>{g.error("error",I),L(I??F.contactSupport,{variant:"error"})})}}),e.jsx(me,{title:"Truncate table?",message:"This action cannot be undone!",open:C,setOpen:S,onConfirm:()=>{Ps(t,s,I=>{if(g.debug(I),I!=null&&I.code&&(I==null?void 0:I.message)!==void 0)switch(I.code){case"ok":L(I.message,{variant:"success"});break;case"info":L(I.message,{variant:"info"});break;default:g.error(I),L(I.message??F.contactSupport,{variant:"error"})}else g.error(I),L(F.contactSupport,{variant:"error"})},I=>{g.error("error",I),L(I??F.contactSupport,{variant:"error"})})}}),e.jsx(me,{title:`Drop ${r===W.VIEW?"view":"table"}?`,message:"This action cannot be undone!",open:w,setOpen:P,onConfirm:()=>{_s(t,s,r,I=>{if(g.debug(I),I!=null&&I.code&&(I==null?void 0:I.message)!==void 0)switch(I.code){case"ok":r===W.VIEW?a(rt({dbs:t})):a(Ve({dbs:t})),a(ot({})),L(I.message,{variant:"success"});break;case"info":L(I.message,{variant:"info"});break;default:g.error(I),L(I.message??F.contactSupport,{variant:"error"})}else g.error(I),L(F.contactSupport,{variant:"error"})},I=>{g.error("error",I),L(I??F.contactSupport,{variant:"error"})})}})]})},xa=({dbs:t,tbl:s,typ:r})=>{var k,_;g.debug(t,s,r);const n=H(),[a,o]=p.useState(Ie(yt.getState()));g.debug(a);const[d,l]=p.useState(""),[c,x]=p.useState(!1),[u,i]=p.useState({}),[h,b]=p.useState(!1),[j,f]=p.useState(!1);p.useEffect(()=>{c||m()},[t,s]);const m=()=>{Or(t,s,!0,M=>{var V,ae;const O=M==null?void 0:M.data;if(g.debug("response data",t,s,O),(V=O==null?void 0:O.access)!=null&&V.select&&Array.isArray(O.access.select)&&O.access.select.includes("POST")){const G={...O.settings};G.list_labels={...O.table_labels},G.form_labels={...O.form_labels},G.column_media={...O.wp_media},delete G.hyperlinks,delete G.ui,delete G.wp;const se={...O};i(se),n(Mn({settings:G,metaData:se})),x(!0)}else{let G=F.contactSupport;(ae=M==null?void 0:M.data)!=null&&ae.message&&(G=M.data.message+" - check console for more information"),g.error(G),l(G)}},M=>{g.error("error",M),l(M??F.contactSupport)})};p.useEffect(()=>{d!==""&&(n(Xt({error:d})),n(At({})),n(ot({})))},[d]);const T=A(M=>Ie(M));g.debug(T);const v=((k=ce)==null?void 0:k.palette.mode)===An.LIGHT?(_=ce)==null?void 0:_.palette.primary.main:"",C=M=>{n(Ln({anchor:M}))},S=()=>{n(ot({})),n(At({}))},w=()=>{h?f(!0):S()},P=()=>{const M={...T};let O=!1;$n(t,s,M,V=>{if(V!=null&&V.code&&(V==null?void 0:V.message)!==void 0)switch(V.code){case"ok":L(V.message,{variant:"success"});break;case"info":L(V.message,{variant:"info"});break;default:g.error(V),L(V.message??F.contactSupport,{variant:"error"}),O=!0}else g.error(V),L(F.contactSupport,{variant:"error"}),O=!0},V=>{g.error(V),L(V??F.contactSupport,{variant:"error"}),O=!0}),O||o(Ie(yt.getState())),b(!1)},N=()=>{h?(P(),setTimeout(()=>{S()},1e3)):S()},[z,R]=p.useState("1"),E=(M,O)=>{R(O)};return d!==""?null:e.jsxs(e.Fragment,{children:[e.jsxs(jr,{closeDrawer:w,children:[e.jsx(ct,{position:"static",elevation:4,sx:{borderRadius:0},children:e.jsxs(dt,{className:"pp-setting-toolbar",sx:{borderRadius:0},children:[e.jsxs(y,{sx:{flexGrow:1},children:[e.jsx(Se,{variant:"h5",noWrap:!0,component:"div",className:"unselectable",sx:{display:{xs:"none",sm:"block"},paddingLeft:"6px"},children:"Manage Table"}),e.jsxs(Se,{sx:{fontSize:"10px",display:{xs:"none",sm:"block"},paddingLeft:"10px"},children:[t," - ",s]})]}),e.jsx(nt,{title:"Dock to left",position:"bottom",children:e.jsx(le,{onClick:()=>{C(Lt.LEFT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(yr,{})})}),e.jsx(nt,{title:"Dock to right",position:"bottom",children:e.jsx(le,{onClick:()=>{C(Lt.RIGHT)},size:"large",color:"inherit",sx:{fontSize:"1em"},children:e.jsx(Ir,{})})}),e.jsx(nt,{title:"Close",position:"bottom",children:e.jsx(le,{onClick:w,size:"large",color:"inherit",sx:{fontSize:"1.4em"},children:e.jsx(Qt,{})})})]})}),e.jsx(Tt,{className:"pp-settings-container",children:e.jsx(St,{sx:{padding:0,margin:0},children:c?e.jsxs(Tr,{value:z,children:[e.jsxs(Sr,{variant:"fullWidth",textColor:"primary",onChange:E,sx:{width:"100%",height:"80px",padding:0,margin:0,backgroundColor:"rgb(242, 242, 242)"},children:[e.jsx(zt,{label:"Actions",value:"1",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}}),e.jsx(zt,{label:"Settings",value:"2",sx:{fontWeight:"bold",fontSize:"110%",height:"80px"}})]}),e.jsxs(y,{sx:{margin:0,padding:0,overflowY:"auto",height:"calc(100vh - 250px)","& > div.MuiTabPanel-root":{padding:0}},children:[e.jsx(Dt,{value:"1",children:e.jsx(pa,{dbs:t,tbl:s,typ:r,metaData:u})}),e.jsxs(Dt,{value:"2",children:[e.jsx(ca,{dbs:t,tbl:s,setIsUpdated:b}),e.jsx(da,{dbs:t,tbl:s,setIsUpdated:b}),e.jsx(ua,{dbs:t,tbl:s,typ:r,metaData:u,setIsUpdated:b}),e.jsx(la,{dbs:t,tbl:s})]})]})]}):e.jsx(y,{sx:{padding:"30px"},children:e.jsx(_t,{title:"Loading data..."})})})}),e.jsx(Tt,{className:"pp-setting-footer",sx:{borderRadius:0,backgroundColor:v},children:e.jsxs(St,{className:"pp-setting-footer-buttons",sx:{borderRadius:0},children:[e.jsx($,{variant:"outlined",className:"footer_action_button_apply",onClick:P,children:"Apply"}),e.jsx($,{variant:"outlined",className:"footer_action_button",onClick:N,children:"OK"}),e.jsx($,{variant:"outlined",className:"footer_action_button",onClick:w,children:"Cancel"})]})})]}),e.jsx(me,{title:"Close Manage Table?",message:"All uncommitted changes will be lost!",open:j,setOpen:f,onConfirm:()=>{S()}})]})},ga=()=>{const t=A(s=>kt(s));return g.debug(t),e.jsx(e.Fragment,{children:t!==void 0&&t.action===ge.MANAGE&&e.jsx(xa,{dbs:t.dbs,tbl:t.tbl,typ:t.typ})})},Qa=()=>{const t=Er();return e.jsx(cr,{theme:t,children:e.jsxs(y,{sx:{"& > :nth-of-type(2)":{visibility:"hidden",position:"fixed"}},children:[e.jsx(ia,{}),e.jsx(aa,{}),e.jsx(ga,{})]})})};export{Qa as default};
