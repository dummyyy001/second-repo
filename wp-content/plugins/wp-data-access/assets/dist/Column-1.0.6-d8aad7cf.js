import{l as b,b$ as K,r as e,j as r,dp as Q,_ as O}from"./main-1.0.6.js";import{l as U}from"./ActionsDml-1.0.6-4c91d556.js";import{b as X}from"./main-1.0.6-7aa8b30c.js";import{i as Y}from"./index-1.0.6-601a5223.js";import{F as Z,A as u,T as l,a as N}from"./TextField-1.0.6-b41aa978.js";import"./iconBase-1.0.6-b8af29f5.js";import"./Close-1.0.6-4b5eac8d.js";const I=({appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,storeForm:y,formMode:x})=>{var H,F;b.debug(v,d,E,A,p,i,L,s,y,x);const j=X(_=>K(_,v));b.debug("data",j);const[k,W]=e.useState([]);b.debug("lov",k);const[R,w]=e.useState(Array.isArray((H=i.lookup)==null?void 0:H.dynamicConditions)?(F=i.lookup)==null?void 0:F.dynamicConditions.map(_=>({columnName:_.tableColumnName,columnValue:""})):[]);b.debug("conditions",R),e.useEffect(()=>{var _,P;Array.isArray((_=i.lookup)==null?void 0:_.dynamicConditions)&&((P=i.lookup)==null||P.dynamicConditions.map(h=>{j[h.tableColumnName]===void 0&&b.error("Invalid lookup: column "+h.tableColumnName+" in dynamic condition not found.")})),R.length===0&&T()},[]),e.useEffect(()=>{var _,P;if(Object.keys(R).length>0){const h=Array.isArray((_=i.lookup)==null?void 0:_.dynamicConditions)?(P=i.lookup)==null?void 0:P.dynamicConditions.map(S=>({columnName:S.lookupColumnName,columnValue:j[S.tableColumnName]??""})):[];if(b.debug(h),!Y(R,h)){const S={};h.length>0&&h.map(g=>{S[g.columnName]=g.columnValue}),b.debug("reloading dynamic lookup",d,h),T(S),w(h)}}},[j]);const T=(_={})=>{var P,h;U(v,"form",d,((P=i.lookup)==null?void 0:P.key)??"",((h=i.lookup)==null?void 0:h.value)??"",_,S=>{var g,t,c;if(b.debug(S.data),!((g=i.lookup)!=null&&g.value.includes(",")))W(S.data);else{const $=(t=i.lookup)==null?void 0:t.value.split(","),q=[];for(let z=0;z<S.data.length;z++){const G=$.map(J=>S.data[z][J]).join(((c=i.lookup)==null?void 0:c.delimiter)??"");q.push({key:S.data[z].key,value:G})}W(q)}},S=>{b.error(S)})},B=e.useMemo(()=>k.filter(_=>_.key===E)[0]??null,[E,k]);return r.jsxs(Z,{fullWidth:!0,children:[r.jsx(u,{multiple:!1,fullWidth:!0,autoHighlight:!0,options:k,getOptionLabel:_=>Array.isArray(_.value)?_.value[0]:_.value,value:B,onChange:(_,P)=>{P!==null?f(d,P==null?void 0:P.key):f(d,null)},renderInput:_=>r.jsx(l,{label:p.formLabel,required:p.is_nullable==="NO",..._,inputProps:{..._.inputProps,autoComplete:"new-password"}})}),r.jsx(N,{children:Q(i,"Select a value from the list or start typing")})]})},M=e.lazy(()=>O(()=>import("./FieldText-1.0.6-b63cac2a.js"),["./FieldText-1.0.6-b63cac2a.js","./main-1.0.6.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./InputAdornment-1.0.6-f8c6f282.js"],import.meta.url)),n=e.lazy(()=>O(()=>import("./FieldTextarea-1.0.6-f11edec3.js"),["./FieldTextarea-1.0.6-f11edec3.js","./main-1.0.6.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js"],import.meta.url)),C=e.lazy(()=>O(()=>import("./FieldNumber-1.0.6-d61ea522.js"),["./FieldNumber-1.0.6-d61ea522.js","./main-1.0.6.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./InputAdornment-1.0.6-f8c6f282.js"],import.meta.url)),V=e.lazy(()=>O(()=>import("./FieldSet-1.0.6-eaf77e7f.js"),["./FieldSet-1.0.6-eaf77e7f.js","./main-1.0.6.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./MenuItem-1.0.6-b9a91535.js"],import.meta.url)),D=e.lazy(()=>O(()=>import("./FieldEnum-1.0.6-1471a692.js"),["./FieldEnum-1.0.6-1471a692.js","./main-1.0.6.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./MenuItem-1.0.6-b9a91535.js","./EnumTypeEnum-1.0.6-7ffcf33a.js","./RadioGroup-1.0.6-adb96ecd.js","./Radio-1.0.6-2befae95.js","./FormControlLabel-1.0.6-72a72881.js"],import.meta.url)),o=e.lazy(()=>O(()=>import("./FieldDate-1.0.6-08b7464b.js"),["./FieldDate-1.0.6-08b7464b.js","./main-1.0.6.js","./dayjs.min-1.0.6-fcad92ca.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./vi-1.0.6-f3183323.js","./useMobilePicker-1.0.6-328fb89a.js","./DialogContent-1.0.6-e7b9fcb3.js","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./InputAdornment-1.0.6-f8c6f282.js","./AdminTheme-1.0.6-6896de59.js","./AdapterDayjs-1.0.6-3596f1a0.js","./DatePicker-1.0.6-75aa4c76.js","./dateViewRenderers-1.0.6-faae157e.js"],import.meta.url)),m=e.lazy(()=>O(()=>import("./FieldDatetime-1.0.6-97a8e7e7.js"),["./FieldDatetime-1.0.6-97a8e7e7.js","./main-1.0.6.js","./dayjs.min-1.0.6-fcad92ca.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./vi-1.0.6-f3183323.js","./useMobilePicker-1.0.6-328fb89a.js","./DialogContent-1.0.6-e7b9fcb3.js","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./InputAdornment-1.0.6-f8c6f282.js","./AdminTheme-1.0.6-6896de59.js","./AdapterDayjs-1.0.6-3596f1a0.js","./DateTimePicker-1.0.6-71307f11.js","./Tabs-1.0.6-e49ea330.js","./date-time-utils-1.0.6-04701755.js","./MenuItem-1.0.6-b9a91535.js","./dateViewRenderers-1.0.6-faae157e.js"],import.meta.url)),a=e.lazy(()=>O(()=>import("./FieldTime-1.0.6-0763ae3a.js"),["./FieldTime-1.0.6-0763ae3a.js","./main-1.0.6.js","./dayjs.min-1.0.6-fcad92ca.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./vi-1.0.6-f3183323.js","./useMobilePicker-1.0.6-328fb89a.js","./DialogContent-1.0.6-e7b9fcb3.js","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./InputAdornment-1.0.6-f8c6f282.js","./AdminTheme-1.0.6-6896de59.js","./AdapterDayjs-1.0.6-3596f1a0.js","./TimePicker-1.0.6-dfb27941.js","./date-time-utils-1.0.6-04701755.js","./MenuItem-1.0.6-b9a91535.js"],import.meta.url)),ii=e.lazy(()=>O(()=>import("./FieldCheckbox-1.0.6-28b9cc22.js"),["./FieldCheckbox-1.0.6-28b9cc22.js","./main-1.0.6.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./FormControlLabel-1.0.6-72a72881.js","./Checkbox-1.0.6-26443287.js"],import.meta.url)),si=e.lazy(()=>O(()=>import("./ColumnWpMedia-1.0.6-603c4893.js"),["./ColumnWpMedia-1.0.6-603c4893.js","./main-1.0.6.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./index.esm-1.0.6-d540f227.js","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./AdminTheme-1.0.6-6896de59.js"],import.meta.url)),ri=e.lazy(()=>O(()=>import("./ColumnHyperlink-1.0.6-8ecde587.js"),["./ColumnHyperlink-1.0.6-8ecde587.js","./main-1.0.6.js","./main-1.0.6-7aa8b30c.js","./iconBase-1.0.6-b8af29f5.js","./main-1.0.6-ca6efa15.css","./TextField-1.0.6-b41aa978.js","./Close-1.0.6-4b5eac8d.js","./FormControlLabel-1.0.6-72a72881.js","./Checkbox-1.0.6-26443287.js"],import.meta.url)),Ei=({appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})=>{if(b.debug(v,d,E,A,p,i,s,y,x,j),s!=null&&s.media[d]){if(["WP-Image","WP-Attachment","WP-Audio","WP-Video"].includes(s==null?void 0:s.media[d]))return r.jsx(e.Suspense,{children:r.jsx(si,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k,columnMedia:y==null?void 0:y.media[d],mediaType:s==null?void 0:s.media[d]})});if((s==null?void 0:s.media[d])==="HyperlinkObject")return r.jsx(e.Suspense,{children:r.jsx(ri,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})})}else{if(p.column_type.toLowerCase()==="tinyint(1)")return r.jsx(e.Suspense,{children:r.jsx(ii,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});if(i.lookup!==void 0)return r.jsx(I,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})}switch(p.data_type.toLowerCase()){case"decimal":case"double":case"double precision":case"float":case"real":case"bit":case"tinyint":case"smallint":case"int":case"integer":case"mediumint":case"bigint":return r.jsx(e.Suspense,{children:r.jsx(C,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"enum":return r.jsx(e.Suspense,{children:r.jsx(D,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"set":return r.jsx(e.Suspense,{children:r.jsx(V,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"time":return r.jsx(e.Suspense,{children:r.jsx(a,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"date":return r.jsx(e.Suspense,{children:r.jsx(o,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"datetime":case"timestamp":return r.jsx(e.Suspense,{children:r.jsx(m,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"tinytext":case"text":case"mediumtext":case"longtext":return r.jsx(e.Suspense,{children:r.jsx(n,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});default:return r.jsx(e.Suspense,{children:r.jsx(M,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})})}};export{Ei as default};
